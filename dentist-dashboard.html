<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dentist Dashboard - DeLas Alas Dental Clinic</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        /* Dentist Dashboard Specific Styles */
        .dashboard-section {
            display: flex;
            min-height: 100vh;
            background: #f5f5f5;
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .clinic-title h2 {
            color: #ffd700;
            margin: 0;
            font-size: 20px;
            text-align: center;
        }

        .user-profile {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .avatar {
            width: 80px;
            height: 80px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 32px;
        }

        .user-info h3 {
            margin: 0 0 5px 0;
            font-size: 18px;
        }

        .user-info p {
            margin: 0 0 15px 0;
            opacity: 0.8;
            font-size: 14px;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            position: relative;
        }

        .nav-item:hover,
        .nav-item.active {
            background: rgba(255,255,255,0.1);
            color: white;
            border-left-color: #ffd700;
        }

        .nav-item i {
            margin-right: 15px;
            width: 20px;
            text-align: center;
        }

        .pending-badge {
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            margin-left: auto;
        }

        .dashboard-main {
            flex: 1;
            margin-left: 280px;
            background: #f5f5f5;
        }

        .dashboard-header {
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left h1 {
            margin: 0;
            color: #2c3e50;
            font-size: 28px;
        }

        .header-left p {
            margin: 5px 0 0 0;
            color: #666;
        }

        .search-bar {
            position: relative;
            width: 400px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .search-bar input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-bar i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: #f8f9fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .header-btn:hover {
            background: #667eea;
            color: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .time-filter {
            padding: 8px 15px;
            border: 2px solid #e9ecef;
            border-radius: 20px;
            background: white;
            cursor: pointer;
        }

        .dashboard-content {
            padding: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 24px;
            color: white;
        }

        .stat-card:nth-child(1) .stat-icon {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .stat-card:nth-child(2) .stat-icon {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .stat-card:nth-child(3) .stat-icon {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
        }

        .stat-card:nth-child(4) .stat-icon {
            background: linear-gradient(135deg, #43e97b, #38f9d7);
        }

        .stat-info h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 16px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #2c3e50;
            margin: 0 0 5px 0;
        }

        .stat-change {
            font-size: 14px;
            font-weight: 500;
        }

        .stat-change.positive {
            color: #28a745;
        }

        .appointments-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            margin: 0;
            color: #2c3e50;
            font-size: 24px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .appointments-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .appointments-table th {
            background: #667eea;
            color: white;
            padding: 20px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .appointments-table td {
            padding: 20px 15px;
            border-bottom: 1px solid #e9ecef;
            vertical-align: middle;
        }

        .appointments-table tr:hover {
            background: #f8f9fa;
        }

        .appointments-table tr:last-child td {
            border-bottom: none;
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status.confirmed {
            background: #d4edda;
            color: #155724;
        }

        .status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .status.completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status.cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .action-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .action-card i {
            font-size: 48px;
            color: #667eea;
            margin-bottom: 15px;
        }

        .action-card h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 18px;
        }

        .action-card p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .patient-cell strong {
            color: #2c3e50;
            font-size: 16px;
        }

        .patient-contact {
            color: #666;
            font-size: 12px;
        }

        .service-name {
            font-weight: 500;
            color: #2c3e50;
        }

        .notes {
            color: #666;
            font-style: italic;
        }

        .text-muted {
            color: #6c757d;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            position: relative;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        /* Additional Styles for New Sections */
        .schedule-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .schedule-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .schedule-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .time-slots {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .time-slot {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }

        .time-slot.confirmed {
            border-color: #28a745;
            background: #d4edda;
        }

        .time-slot.pending {
            border-color: #ffc107;
            background: #fff3cd;
        }

        .time-slot.available {
            border-color: #17a2b8;
            background: #d1ecf1;
        }

        .time-info {
            display: flex;
            flex-direction: column;
        }

        .time {
            font-weight: bold;
            font-size: 16px;
        }

        .duration {
            font-size: 12px;
            color: #666;
        }

        .patient-info {
            flex: 1;
            margin: 0 15px;
        }

        .available-text {
            color: #666;
            font-style: italic;
        }

        .slot-actions {
            display: flex;
            gap: 5px;
        }

        .schedule-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .patients-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .patients-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .patients-table {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-filters {
            display: flex;
            gap: 10px;
        }

        .patient-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .patient-avatar {
            width: 40px;
            height: 40px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .services-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .services-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .service-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .service-category {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .service-price {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }

        .service-duration {
            color: #666;
            margin-bottom: 10px;
        }

        .service-stats {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }

        .stat {
            font-size: 12px;
            color: #666;
        }

        .service-actions {
            display: flex;
            gap: 5px;
            margin-top: 15px;
        }

        .reports-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .report-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .chart-container {
            display: flex;
            align-items: end;
            gap: 10px;
            height: 150px;
            margin: 15px 0;
        }

        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 4px 4px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 5px;
            position: relative;
        }

        .bar-label {
            font-size: 12px;
            color: white;
            text-align: center;
        }

        .bar-value {
            font-size: 10px;
            color: white;
            text-align: center;
        }

        .service-popularity {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .service-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-name {
            min-width: 120px;
            font-size: 14px;
        }

        .service-bar {
            flex: 1;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .service-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
        }

        .service-percentage {
            min-width: 30px;
            text-align: right;
            font-weight: bold;
        }

        .peak-hours {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .hour-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hour-time {
            min-width: 60px;
            font-size: 12px;
        }

        .hour-bar {
            flex: 1;
            height: 15px;
            background: #e9ecef;
            border-radius: 7px;
            overflow: hidden;
        }

        .hour-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            border-radius: 7px;
        }

        .hour-count {
            min-width: 20px;
            text-align: right;
            font-size: 12px;
            font-weight: bold;
        }

        .settings-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .settings-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .settings-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group label {
            min-width: 120px;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
        }

        .checkbox-group {
            flex-direction: row;
            align-items: center;
        }

        .checkbox-group label {
            min-width: auto;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            flex: none;
        }

        /* Appointments Section Styles */
        .appointments-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .appointments-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .appointments-filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-weight: 500;
            color: #2c3e50;
            font-size: 14px;
        }

        .filter-group select {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 14px;
            min-width: 150px;
        }

        .filter-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .appointments-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .appointments-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .appointments-table th {
            background: #667eea;
            color: white;
            padding: 20px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .appointments-table td {
            padding: 20px 15px;
            border-bottom: 1px solid #e9ecef;
            vertical-align: middle;
        }

        .appointments-table tr:hover {
            background: #f8f9fa;
        }

        .appointments-table tr:last-child td {
            border-bottom: none;
        }

        .datetime-cell {
            display: flex;
            flex-direction: column;
        }

        .datetime-cell .time {
            color: #666;
            font-size: 14px;
        }

        .patient-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .patient-cell .patient-avatar {
            width: 40px;
            height: 40px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .patient-cell .patient-details {
            display: flex;
            flex-direction: column;
        }

        .patient-cell .patient-details p {
            margin: 0;
            color: #666;
            font-size: 12px;
        }

        .service-name {
            font-weight: 500;
            color: #2c3e50;
        }

        .notes {
            color: #666;
            font-style: italic;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .contact-info div {
            font-size: 14px;
            color: #666;
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status.confirmed {
            background: #d4edda;
            color: #155724;
        }

        .status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .status.completed {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status.cancelled {
            background: #f8d7da;
            color: #721c24;
        }

        .text-muted {
            color: #6c757d;
            font-style: italic;
        }

        .stat-change.warning {
            color: #ffc107;
        }

        .stat-change.negative {
            color: #dc3545;
        }

        /* Calendar Styles */
        .calendar-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-header h3 {
            margin: 0;
            color: #2c3e50;
        }

        .calendar-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .calendar-controls span {
            font-weight: 600;
            color: #2c3e50;
            min-width: 120px;
            text-align: center;
        }

        .calendar-container {
            margin-bottom: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background: #667eea;
            color: white;
        }

        .weekday {
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background: white;
        }

        .calendar-day {
            min-height: 80px;
            padding: 8px;
            border: 1px solid #e9ecef;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        .calendar-day:hover {
            background: #f8f9fa;
        }

        .calendar-day.other-month {
            background: #f8f9fa;
            color: #adb5bd;
        }

        .calendar-day.today {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .calendar-day.has-appointments {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .calendar-day.has-confirmed {
            background: #d4edda;
            border-color: #28a745;
        }

        .calendar-day.has-pending {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .day-number {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .appointment-count {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .appointment-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin: 1px;
        }

        .appointment-dot.confirmed {
            background: #28a745;
        }

        .appointment-dot.pending {
            background: #ffc107;
        }

        .appointment-dot.available {
            background: #17a2b8;
        }

        .appointment-count-text {
            font-size: 10px;
            font-weight: 600;
            color: #666;
        }

        .calendar-legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-color.confirmed {
            background: #28a745;
        }

        .legend-color.pending {
            background: #ffc107;
        }

        .legend-color.available {
            background: #17a2b8;
        }

        .legend-color.today {
            background: #2196f3;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
            }

            .dashboard-main {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .actions-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .search-bar {
                width: 100%;
                margin: 10px 0;
            }

            .header-right {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Dentist Dashboard Section -->
    <div id="dentist-dashboard-section" class="dashboard-section">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" style="display: none;">0</span>
                </a>
                <a href="#patients" class="nav-item">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Dashboard Header -->
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>Dashboard</h1>
                    <p>Welcome back, Dr. Maria Santos</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search patients, appointments...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button id="settingsBtn" class="header-btn">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="notificationsBtn" class="header-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <select id="timeFilter" class="time-filter">
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                    </select>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Stats Cards -->
                <section class="stats-section">
                    <div class="stats-grid">
                        <div class="stat-card" id="todayAppointments">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Today's Appointments</h3>
                                <p class="stat-value">8</p>
                                <span class="stat-change positive">+2 from yesterday</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" id="totalPatients">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total Patients</h3>
                                <p class="stat-value">156</p>
                                <span class="stat-change positive">+12 this month</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" id="completedAppointments">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Completed Today</h3>
                                <p class="stat-value">5</p>
                                <span class="stat-change positive">+1 this hour</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" id="revenue">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Today's Revenue</h3>
                                <p class="stat-value">‚Ç±25,000</p>
                                <span class="stat-change positive">+15% from yesterday</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Appointments Table -->
                <section class="recent-appointments">
                    <div class="section-header">
                        <h2>All Appointments</h2>
                        <div class="header-actions">
                            <button id="exportBtn" class="btn btn-secondary">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button id="refreshBtn" class="btn btn-primary">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>
                    
                    <div class="appointments-table" id="appointmentsTable">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date & Time</th>
                                    <th>Patient</th>
                                    <th>Service</th>
                                    <th>Status</th>
                                    <th>QR Code</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsTableBody">
                                <!-- Appointments will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="quick-actions">
                    <div class="section-header">
                        <h2>Quick Actions</h2>
                    </div>
                    
                    <div class="actions-grid">
                        <button class="action-card" onclick="showPatientBooking()">
                            <i class="fas fa-calendar-plus"></i>
                            <h3>New Appointment</h3>
                            <p>Schedule a new patient appointment</p>
                        </button>
                        
                        <button class="action-card" onclick="showAddPatient()">
                            <i class="fas fa-user-plus"></i>
                            <h3>Add Patient</h3>
                            <p>Register a new patient</p>
                        </button>
                        
                        <button class="action-card" onclick="showPatientRecords()">
                            <i class="fas fa-file-medical"></i>
                            <h3>Patient Records</h3>
                            <p>Access patient medical history</p>
                        </button>
                        
                        <button class="action-card" onclick="showReports()">
                            <i class="fas fa-chart-line"></i>
                            <h3>Reports</h3>
                            <p>View clinic performance reports</p>
                        </button>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Schedule Section -->
    <div id="schedule-section" class="dashboard-section" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item" onclick="showDentistSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item active">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item" onclick="showDentistSection('appointments')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" style="display: none;">0</span>
                </a>
                <a href="#patients" class="nav-item" onclick="showDentistSection('patients')">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item" onclick="showDentistSection('services')">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showDentistSection('reports')">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showDentistSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>üìÖ Schedule Management</h1>
                    <p>Manage your daily schedule and time slots</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="scheduleSearchInput" placeholder="Search appointments, patients...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-primary" onclick="addScheduleSlot()">
                        <i class="fas fa-plus"></i> Add Time Slot
                    </button>
                    <button class="btn btn-secondary" onclick="viewCalendar()">
                        <i class="fas fa-calendar"></i> Calendar View
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="schedule-container">
                    <div class="schedule-grid">
                        <div class="schedule-card">
                            <h3>üìÖ Today's Schedule</h3>
                            <div class="time-slots">
                                <div class="time-slot confirmed">
                                    <div class="time-info">
                                        <span class="time">09:00 AM</span>
                                        <span class="duration">60 min</span>
                                    </div>
                                    <div class="patient-info">
                                        <strong>John Smith</strong>
                                        <p>Dental Cleaning</p>
                                    </div>
                                    <div class="slot-actions">
                                        <button class="btn btn-sm btn-success" onclick="startAppointment(1)">Start</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(1)">Edit</button>
                                    </div>
                                </div>
                                
                                <div class="time-slot confirmed">
                                    <div class="time-info">
                                        <span class="time">10:30 AM</span>
                                        <span class="duration">90 min</span>
                                    </div>
                                    <div class="patient-info">
                                        <strong>Sarah Johnson</strong>
                                        <p>Teeth Whitening</p>
                                    </div>
                                    <div class="slot-actions">
                                        <button class="btn btn-sm btn-success" onclick="startAppointment(2)">Start</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(2)">Edit</button>
                                    </div>
                                </div>
                                
                                <div class="time-slot pending">
                                    <div class="time-info">
                                        <span class="time">02:00 PM</span>
                                        <span class="duration">45 min</span>
                                    </div>
                                    <div class="patient-info">
                                        <strong>Mike Davis</strong>
                                        <p>Dental Filling</p>
                                    </div>
                                    <div class="slot-actions">
                                        <button class="btn btn-sm btn-warning" onclick="confirmAppointment(3)">Confirm</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(3)">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="schedule-card">
                            <h3>‚è∞ Available Slots</h3>
                            <div class="time-slots">
                                <div class="time-slot available">
                                    <div class="time-info">
                                        <span class="time">11:00 AM</span>
                                        <span class="duration">60 min</span>
                                    </div>
                                    <div class="patient-info">
                                        <span class="available-text">Available</span>
                                    </div>
                                    <div class="slot-actions">
                                        <button class="btn btn-sm btn-primary" onclick="bookSlot('11:00')">Book</button>
                                    </div>
                                </div>
                                
                                <div class="time-slot available">
                                    <div class="time-info">
                                        <span class="time">03:30 PM</span>
                                        <span class="duration">60 min</span>
                                    </div>
                                    <div class="patient-info">
                                        <span class="available-text">Available</span>
                                    </div>
                                    <div class="slot-actions">
                                        <button class="btn btn-sm btn-primary" onclick="bookSlot('15:30')">Book</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="schedule-stats">
                        <div class="stat-item">
                            <span class="stat-label">Total Appointments</span>
                            <span class="stat-value">8</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Completed</span>
                            <span class="stat-value">5</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Pending</span>
                            <span class="stat-value">2</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Available</span>
                            <span class="stat-value">3</span>
                        </div>
                    </div>
                    
                    <!-- Calendar View -->
                    <div class="calendar-section">
                        <div class="calendar-header">
                            <h3>üìÖ Monthly Calendar View</h3>
                            <div class="calendar-controls">
                                <button class="btn btn-sm btn-secondary" onclick="previousMonth()">
                                    <i class="fas fa-chevron-left"></i> Previous
                                </button>
                                <span id="currentMonthYear">January 2025</span>
                                <button class="btn btn-sm btn-secondary" onclick="nextMonth()">
                                    Next <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="calendar-container">
                            <div class="calendar-grid">
                                <div class="calendar-weekdays">
                                    <div class="weekday">Mon</div>
                                    <div class="weekday">Tue</div>
                                    <div class="weekday">Wed</div>
                                    <div class="weekday">Thu</div>
                                    <div class="weekday">Fri</div>
                                    <div class="weekday">Sat</div>
                                    <div class="weekday">Sun</div>
                                </div>
                                
                                <div class="calendar-days" id="calendarDays">
                                    <!-- Calendar days will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="calendar-legend">
                            <div class="legend-item">
                                <div class="legend-color confirmed"></div>
                                <span>Confirmed Appointments</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color pending"></div>
                                <span>Pending Appointments</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color available"></div>
                                <span>Available Slots</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color today"></div>
                                <span>Today</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Patients Section -->
    <div id="patients-section" class="dashboard-section" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item" onclick="showDentistSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item" onclick="showDentistSection('schedule')">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item" onclick="showDentistSection('appointments')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" style="display: none;">0</span>
                </a>
                <a href="#patients" class="nav-item active">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item" onclick="showDentistSection('services')">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showDentistSection('reports')">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showDentistSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>üë• Patient Management</h1>
                    <p>Manage patient records and information</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="patientSearchInput" placeholder="Search patients by name, email...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-primary" onclick="addNewPatient()">
                        <i class="fas fa-user-plus"></i> Add Patient
                    </button>
                    <button class="btn btn-secondary" onclick="exportPatients()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="patients-container">
                    <div class="patients-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total Patients</h3>
                                <p class="stat-value">156</p>
                                <span class="stat-change positive">+12 this month</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Active Patients</h3>
                                <p class="stat-value">142</p>
                                <span class="stat-change positive">+8 this month</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>New This Week</h3>
                                <p class="stat-value">5</p>
                                <span class="stat-change positive">+2 from last week</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="patients-table">
                        <div class="table-header">
                            <h3>Patient List</h3>
                            <div class="table-filters">
                                <select id="statusFilter">
                                    <option value="">All Status</option>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                                <select id="sortBy">
                                    <option value="name">Sort by Name</option>
                                    <option value="lastVisit">Sort by Last Visit</option>
                                    <option value="totalVisits">Sort by Total Visits</option>
                                </select>
                            </div>
                        </div>
                        
                        <table>
                            <thead>
                                <tr>
                                    <th>Patient</th>
                                    <th>Contact</th>
                                    <th>Last Visit</th>
                                    <th>Total Visits</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="patient-info">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>John Smith</strong>
                                                <p>ID: PAT-001</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>john@email.com</div>
                                            <div>+1234567890</div>
                                        </div>
                                    </td>
                                    <td>2024-01-10</td>
                                    <td>5</td>
                                    <td><span class="status active">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm" onclick="viewPatientDetails(1)">View</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editPatient(1)">Edit</button>
                                        <button class="btn btn-sm btn-info" onclick="viewPatientHistory(1)">History</button>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <div class="patient-info">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>Sarah Johnson</strong>
                                                <p>ID: PAT-002</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>sarah@email.com</div>
                                            <div>+1234567891</div>
                                        </div>
                                    </td>
                                    <td>2024-01-12</td>
                                    <td>3</td>
                                    <td><span class="status active">Active</span></td>
                                    <td>
                                        <button class="btn btn-sm" onclick="viewPatientDetails(2)">View</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editPatient(2)">Edit</button>
                                        <button class="btn btn-sm btn-info" onclick="viewPatientHistory(2)">History</button>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <div class="patient-info">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>Mike Davis</strong>
                                                <p>ID: PAT-003</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>mike@email.com</div>
                                            <div>+1234567892</div>
                                        </div>
                                    </td>
                                    <td>2023-12-15</td>
                                    <td>2</td>
                                    <td><span class="status inactive">Inactive</span></td>
                                    <td>
                                        <button class="btn btn-sm" onclick="viewPatientDetails(3)">View</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editPatient(3)">Edit</button>
                                        <button class="btn btn-sm btn-info" onclick="viewPatientHistory(3)">History</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Services Section -->
    <div id="services-section" class="dashboard-section" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item" onclick="showDentistSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item" onclick="showDentistSection('schedule')">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item" onclick="showDentistSection('appointments')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" style="display: none;">0</span>
                </a>
                <a href="#patients" class="nav-item" onclick="showDentistSection('patients')">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item active">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showDentistSection('reports')">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showDentistSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>üõ†Ô∏è Services Management</h1>
                    <p>Manage dental services and pricing</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="serviceSearchInput" placeholder="Search services...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-primary" onclick="addNewService()">
                        <i class="fas fa-plus"></i> Add Service
                    </button>
                    <button class="btn btn-secondary" onclick="exportServices()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="services-container">
                    <div class="services-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total Services</h3>
                                <p class="stat-value">12</p>
                                <span class="stat-change positive">+2 this month</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Most Popular</h3>
                                <p class="stat-value">Cleaning</p>
                                <span class="stat-change positive">45% of bookings</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Avg. Price</h3>
                                <p class="stat-value">‚Ç±4,200</p>
                                <span class="stat-change positive">+5% from last month</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="services-grid">
                        <div class="service-card">
                            <div class="service-header">
                                <h3>ü¶∑ Dental Cleaning</h3>
                                <span class="service-category">General</span>
                            </div>
                            <div class="service-price">‚Ç±2,500</div>
                            <div class="service-duration">60 minutes</div>
                            <p class="service-description">Professional dental cleaning and scaling</p>
                            <div class="service-stats">
                                <span class="stat">üìä 45 bookings</span>
                                <span class="stat">‚≠ê 4.8 rating</span>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-sm" onclick="editService(1)">Edit</button>
                                <button class="btn btn-sm btn-secondary" onclick="viewServiceDetails(1)">Details</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteService(1)">Delete</button>
                            </div>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-header">
                                <h3>‚ú® Teeth Whitening</h3>
                                <span class="service-category">Cosmetic</span>
                            </div>
                            <div class="service-price">‚Ç±8,000</div>
                            <div class="service-duration">90 minutes</div>
                            <p class="service-description">Professional teeth whitening treatment</p>
                            <div class="service-stats">
                                <span class="stat">üìä 25 bookings</span>
                                <span class="stat">‚≠ê 4.9 rating</span>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-sm" onclick="editService(2)">Edit</button>
                                <button class="btn btn-sm btn-secondary" onclick="viewServiceDetails(2)">Details</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteService(2)">Delete</button>
                            </div>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-header">
                                <h3>üîß Dental Filling</h3>
                                <span class="service-category">Restorative</span>
                            </div>
                            <div class="service-price">‚Ç±3,500</div>
                            <div class="service-duration">45 minutes</div>
                            <p class="service-description">Tooth filling with composite material</p>
                            <div class="service-stats">
                                <span class="stat">üìä 30 bookings</span>
                                <span class="stat">‚≠ê 4.7 rating</span>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-sm" onclick="editService(3)">Edit</button>
                                <button class="btn btn-sm btn-secondary" onclick="viewServiceDetails(3)">Details</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteService(3)">Delete</button>
                            </div>
                        </div>
                        
                        <div class="service-card">
                            <div class="service-header">
                                <h3>ü¶∑ Tooth Extraction</h3>
                                <span class="service-category">Surgery</span>
                            </div>
                            <div class="service-price">‚Ç±4,500</div>
                            <div class="service-duration">30 minutes</div>
                            <p class="service-description">Simple tooth extraction procedure</p>
                            <div class="service-stats">
                                <span class="stat">üìä 15 bookings</span>
                                <span class="stat">‚≠ê 4.6 rating</span>
                            </div>
                            <div class="service-actions">
                                <button class="btn btn-sm" onclick="editService(4)">Edit</button>
                                <button class="btn btn-sm btn-secondary" onclick="viewServiceDetails(4)">Details</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteService(4)">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Reports Section -->
    <div id="reports-section" class="dashboard-section" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item" onclick="showDentistSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item" onclick="showDentistSection('schedule')">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item" onclick="showDentistSection('appointments')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" style="display: none;">0</span>
                </a>
                <a href="#patients" class="nav-item" onclick="showDentistSection('patients')">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item" onclick="showDentistSection('services')">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item active">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showDentistSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>üìä Reports & Analytics</h1>
                    <p>View clinic performance and analytics</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="reportSearchInput" placeholder="Search reports...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-primary" onclick="generateReport()">
                        <i class="fas fa-chart-line"></i> Generate Report
                    </button>
                    <button class="btn btn-secondary" onclick="exportReport()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="reports-container">
                    <div class="reports-grid">
                        <div class="report-card">
                            <h3>üìà Monthly Revenue</h3>
                            <div class="report-chart">
                                <div class="chart-container">
                                    <div class="chart-bar" style="height: 60%">
                                        <span class="bar-label">Jan</span>
                                        <span class="bar-value">‚Ç±75K</span>
                                    </div>
                                    <div class="chart-bar" style="height: 80%">
                                        <span class="bar-label">Feb</span>
                                        <span class="bar-value">‚Ç±95K</span>
                                    </div>
                                    <div class="chart-bar" style="height: 100%">
                                        <span class="bar-label">Mar</span>
                                        <span class="bar-value">‚Ç±125K</span>
                                    </div>
                                    <div class="chart-bar" style="height: 70%">
                                        <span class="bar-label">Apr</span>
                                        <span class="bar-value">‚Ç±85K</span>
                                    </div>
                                </div>
                            </div>
                            <div class="report-summary">
                                <span class="summary-label">Total Revenue</span>
                                <span class="summary-value">‚Ç±380,000</span>
                            </div>
                        </div>
                        
                        <div class="report-card">
                            <h3>üë• Patient Growth</h3>
                            <div class="patient-growth-chart">
                                <div class="growth-item">
                                    <span class="growth-label">New Patients</span>
                                    <span class="growth-value">+12</span>
                                    <span class="growth-change positive">+20%</span>
                                </div>
                                <div class="growth-item">
                                    <span class="growth-label">Returning</span>
                                    <span class="growth-value">+8</span>
                                    <span class="growth-change positive">+15%</span>
                                </div>
                                <div class="growth-item">
                                    <span class="growth-label">Total Active</span>
                                    <span class="growth-value">142</span>
                                    <span class="growth-change positive">+8%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-card">
                            <h3>ü¶∑ Popular Services</h3>
                            <div class="service-popularity">
                                <div class="service-item">
                                    <span class="service-name">Dental Cleaning</span>
                                    <div class="service-bar">
                                        <div class="service-fill" style="width: 45%"></div>
                                    </div>
                                    <span class="service-percentage">45%</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">Teeth Whitening</span>
                                    <div class="service-bar">
                                        <div class="service-fill" style="width: 25%"></div>
                                    </div>
                                    <span class="service-percentage">25%</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">Dental Filling</span>
                                    <div class="service-bar">
                                        <div class="service-fill" style="width: 20%"></div>
                                    </div>
                                    <span class="service-percentage">20%</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">Others</span>
                                    <div class="service-bar">
                                        <div class="service-fill" style="width: 10%"></div>
                                    </div>
                                    <span class="service-percentage">10%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-card">
                            <h3>‚è∞ Appointment Stats</h3>
                            <div class="appointment-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Total Appointments</span>
                                    <span class="stat-value">156</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Completed</span>
                                    <span class="stat-value">142</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Cancelled</span>
                                    <span class="stat-value">8</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">No-show</span>
                                    <span class="stat-value">6</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-card">
                            <h3>üí∞ Financial Summary</h3>
                            <div class="financial-summary">
                                <div class="financial-item">
                                    <span class="financial-label">Monthly Revenue</span>
                                    <span class="financial-value">‚Ç±125,000</span>
                                </div>
                                <div class="financial-item">
                                    <span class="financial-label">Average per Patient</span>
                                    <span class="financial-value">‚Ç±4,200</span>
                                </div>
                                <div class="financial-item">
                                    <span class="financial-label">Growth Rate</span>
                                    <span class="financial-value positive">+15%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-card">
                            <h3>üìÖ Peak Hours</h3>
                            <div class="peak-hours">
                                <div class="hour-item">
                                    <span class="hour-time">9:00 AM</span>
                                    <div class="hour-bar">
                                        <div class="hour-fill" style="width: 80%"></div>
                                    </div>
                                    <span class="hour-count">12</span>
                                </div>
                                <div class="hour-item">
                                    <span class="hour-time">10:00 AM</span>
                                    <div class="hour-bar">
                                        <div class="hour-fill" style="width: 100%"></div>
                                    </div>
                                    <span class="hour-count">15</span>
                                </div>
                                <div class="hour-item">
                                    <span class="hour-time">2:00 PM</span>
                                    <div class="hour-bar">
                                        <div class="hour-fill" style="width: 90%"></div>
                                    </div>
                                    <span class="hour-count">14</span>
                                </div>
                                <div class="hour-item">
                                    <span class="hour-time">3:00 PM</span>
                                    <div class="hour-bar">
                                        <div class="hour-fill" style="width: 70%"></div>
                                    </div>
                                    <span class="hour-count">11</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Section -->
    <div id="settings-section" class="dashboard-section" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item" onclick="showDentistSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item" onclick="showDentistSection('schedule')">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item" onclick="showDentistSection('appointments')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" style="display: none;">0</span>
                </a>
                <a href="#patients" class="nav-item" onclick="showDentistSection('patients')">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item" onclick="showDentistSection('services')">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showDentistSection('reports')">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item active">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>‚öôÔ∏è Settings</h1>
                    <p>Manage your account and clinic settings</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="settingsSearchInput" placeholder="Search settings...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-primary" onclick="saveAllSettings()">
                        <i class="fas fa-save"></i> Save All
                    </button>
                    <button class="btn btn-secondary" onclick="resetSettings()">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="settings-container">
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3>üë§ Profile Settings</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label for="profileFullName">Full Name:</label>
                                    <input type="text" id="profileFullName" value="Dr. Maria Santos">
                                    <button class="btn btn-sm" onclick="updateProfile()">Update</button>
                                </div>
                                <div class="form-group">
                                    <label for="profileEmail">Email:</label>
                                    <input type="email" id="profileEmail" value="dr.maria@clinic.com">
                                    <button class="btn btn-sm" onclick="updateProfile()">Update</button>
                                </div>
                                <div class="form-group">
                                    <label for="profilePhone">Phone:</label>
                                    <input type="tel" id="profilePhone" value="+63 912 345 6789">
                                    <button class="btn btn-sm" onclick="updateProfile()">Update</button>
                                </div>
                                <div class="form-group">
                                    <label for="profileSpecialization">Specialization:</label>
                                    <select id="profileSpecialization">
                                        <option value="general" selected>General Dentistry</option>
                                        <option value="orthodontics">Orthodontics</option>
                                        <option value="periodontics">Periodontics</option>
                                        <option value="endodontics">Endodontics</option>
                                        <option value="oral-surgery">Oral Surgery</option>
                                        <option value="pediatric">Pediatric Dentistry</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3>üè• Clinic Settings</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label for="clinicName">Clinic Name:</label>
                                    <input type="text" id="clinicName" value="DeLas Alas Dental Clinic">
                                    <button class="btn btn-sm" onclick="updateClinic()">Update</button>
                                </div>
                                <div class="form-group">
                                    <label for="clinicAddress">Address:</label>
                                    <textarea id="clinicAddress" rows="3">123 Main Street, Manila, Philippines</textarea>
                                    <button class="btn btn-sm" onclick="updateClinic()">Update</button>
                                </div>
                                <div class="form-group">
                                    <label for="clinicPhone">Phone:</label>
                                    <input type="tel" id="clinicPhone" value="(02) 1234-5678">
                                    <button class="btn btn-sm" onclick="updateClinic()">Update</button>
                                </div>
                                <div class="form-group">
                                    <label for="businessHours">Business Hours:</label>
                                    <input type="text" id="businessHours" value="8:00 AM - 6:00 PM">
                                    <button class="btn btn-sm" onclick="updateClinic()">Update</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3>üîî Notifications</h3>
                            <div class="settings-form">
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="emailNotifications" checked> Email Notifications
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="smsNotifications" checked> SMS Notifications
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="appointmentReminders" checked> Appointment Reminders
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="patientUpdates"> Patient Updates
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="systemAlerts" checked> System Alerts
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3>üîí Security</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label for="currentPassword">Current Password:</label>
                                    <input type="password" id="currentPassword" placeholder="Enter current password">
                                </div>
                                <div class="form-group">
                                    <label for="newPassword">New Password:</label>
                                    <input type="password" id="newPassword" placeholder="Enter new password">
                                </div>
                                <div class="form-group">
                                    <label for="confirmPassword">Confirm Password:</label>
                                    <input type="password" id="confirmPassword" placeholder="Confirm new password">
                                </div>
                                <button class="btn btn-primary" onclick="changePassword()">Change Password</button>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3>üé® Appearance</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label for="theme">Theme:</label>
                                    <select id="theme">
                                        <option value="light" selected>Light</option>
                                        <option value="dark">Dark</option>
                                        <option value="auto">Auto</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="language">Language:</label>
                                    <select id="language">
                                        <option value="en" selected>English</option>
                                        <option value="fil">Filipino</option>
                                        <option value="es">Spanish</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="timezone">Timezone:</label>
                                    <select id="timezone">
                                        <option value="Asia/Manila" selected>Asia/Manila (GMT+8)</option>
                                        <option value="UTC">UTC (GMT+0)</option>
                                        <option value="America/New_York">America/New_York (GMT-5)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card">
                            <h3>üìä Data & Privacy</h3>
                            <div class="settings-form">
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="dataSharing" checked> Share data for better service
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="analytics"> Enable analytics
                                    </label>
                                </div>
                                <div class="form-group checkbox-group">
                                    <label>
                                        <input type="checkbox" id="backupData" checked> Automatic backup
                                    </label>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-secondary" onclick="exportData()">Export Data</button>
                                    <button class="btn btn-danger" onclick="deleteAccount()">Delete Account</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Appointments Section -->
    <div id="appointments-section" class="dashboard-section" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="clinic-title">
                    <h2>DeLas Alas Dental Clinic</h2>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-info">
                    <h3 id="dentistName">Dr. Maria Santos</h3>
                    <p id="dentistEmail">dr.maria@clinic.com</p>
                    <button id="dentistEditProfileBtn" class="btn btn-sm btn-secondary">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item" onclick="showDentistSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#schedule" class="nav-item" onclick="showDentistSection('schedule')">
                    <i class="fas fa-calendar"></i>
                    <span>Schedule</span>
                </a>
                <a href="#appointments" class="nav-item active">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                    <span class="pending-badge" id="appointmentsBadge">3</span>
                </a>
                <a href="#patients" class="nav-item" onclick="showDentistSection('patients')">
                    <i class="fas fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#services" class="nav-item" onclick="showDentistSection('services')">
                    <i class="fas fa-tools"></i>
                    <span>Services</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showDentistSection('reports')">
                    <i class="fas fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showDentistSection('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <button id="dentistLogoutBtn" class="nav-item logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>üìÖ Patient Appointments</h1>
                    <p>Manage all patient bookings and confirmations</p>
                </div>
                
                <div class="header-center">
                    <div class="search-bar">
                        <input type="text" id="appointmentSearchInput" placeholder="Search appointments, patients...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-primary" onclick="refreshAppointments()">
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                    <button class="btn btn-secondary" onclick="exportAppointments()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="appointments-container">
                    <div class="appointments-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total Appointments</h3>
                                <p class="stat-value">8</p>
                                <span class="stat-change positive">+2 today</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Pending</h3>
                                <p class="stat-value">3</p>
                                <span class="stat-change warning">Needs confirmation</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Confirmed</h3>
                                <p class="stat-value">4</p>
                                <span class="stat-change positive">Ready for treatment</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Cancelled</h3>
                                <p class="stat-value">1</p>
                                <span class="stat-change negative">This week</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="appointments-filters">
                        <div class="filter-group">
                            <label>Filter by Status:</label>
                            <select id="statusFilter">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label>Filter by Date:</label>
                            <select id="dateFilter">
                                <option value="">All Dates</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label>Sort by:</label>
                            <select id="sortFilter">
                                <option value="date">Date</option>
                                <option value="patient">Patient Name</option>
                                <option value="service">Service</option>
                                <option value="status">Status</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="appointments-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date & Time</th>
                                    <th>Patient</th>
                                    <th>Service</th>
                                    <th>Contact</th>
                                    <th>Status</th>
                                    <th>QR Code</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsTableBody">
                                <tr>
                                    <td>
                                        <div class="datetime-cell">
                                            <strong>Jan 15, 2024</strong>
                                            <br>
                                            <span class="time">09:00 AM</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="patient-cell">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>John Smith</strong>
                                                <p>ID: PAT-001</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="service-name">Dental Cleaning</span>
                                        <br>
                                        <small class="notes">Regular cleaning appointment</small>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>john@email.com</div>
                                            <div>+1234567890</div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="status confirmed">Confirmed</span>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-info" onclick="showQRCode(1)">View QR</button>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-success" onclick="startAppointment(1)">Start</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(1)">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="cancelAppointment(1)">Cancel</button>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <div class="datetime-cell">
                                            <strong>Jan 15, 2024</strong>
                                            <br>
                                            <span class="time">10:30 AM</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="patient-cell">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>Sarah Johnson</strong>
                                                <p>ID: PAT-002</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="service-name">Teeth Whitening</span>
                                        <br>
                                        <small class="notes">Teeth whitening treatment</small>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>sarah@email.com</div>
                                            <div>+1234567891</div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="status confirmed">Confirmed</span>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-info" onclick="showQRCode(2)">View QR</button>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-success" onclick="startAppointment(2)">Start</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(2)">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="cancelAppointment(2)">Cancel</button>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <div class="datetime-cell">
                                            <strong>Jan 15, 2024</strong>
                                            <br>
                                            <span class="time">02:00 PM</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="patient-cell">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>Mike Davis</strong>
                                                <p>ID: PAT-003</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="service-name">Dental Filling</span>
                                        <br>
                                        <small class="notes">Patient booked online - needs confirmation</small>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>mike@email.com</div>
                                            <div>+1234567892</div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="status pending">Pending</span>
                                    </td>
                                    <td>
                                        <span class="text-muted">Not confirmed</span>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-warning" onclick="confirmAppointment(3)">Confirm</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(3)">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="cancelAppointment(3)">Cancel</button>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <div class="datetime-cell">
                                            <strong>Jan 16, 2024</strong>
                                            <br>
                                            <span class="time">09:30 AM</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="patient-cell">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>Emma Wilson</strong>
                                                <p>ID: PAT-004</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="service-name">Root Canal Treatment</span>
                                        <br>
                                        <small class="notes">Emergency appointment requested</small>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>emma@email.com</div>
                                            <div>+1234567893</div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="status pending">Pending</span>
                                    </td>
                                    <td>
                                        <span class="text-muted">Not confirmed</span>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-warning" onclick="confirmAppointment(4)">Confirm</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(4)">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="cancelAppointment(4)">Cancel</button>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <div class="datetime-cell">
                                            <strong>Jan 16, 2024</strong>
                                            <br>
                                            <span class="time">11:00 AM</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="patient-cell">
                                            <div class="patient-avatar">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div class="patient-details">
                                                <strong>Robert Brown</strong>
                                                <p>ID: PAT-005</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="service-name">Dental Crown</span>
                                        <br>
                                        <small class="notes">Crown replacement</small>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>robert@email.com</div>
                                            <div>+1234567894</div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="status confirmed">Confirmed</span>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-info" onclick="showQRCode(5)">View QR</button>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-success" onclick="startAppointment(5)">Start</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(5)">Edit</button>
                                        <button class="btn btn-sm btn-danger" onclick="cancelAppointment(5)">Cancel</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Profile</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editProfileFullName">Full Name</label>
                    <input type="text" id="editProfileFullName" name="fullName" required>
                </div>
                
                <div class="form-group">
                    <label for="editProfileEmail">Email</label>
                    <input type="email" id="editProfileEmail" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="editProfilePhone">Phone</label>
                    <input type="tel" id="editProfilePhone" name="phone">
                </div>
                
                <div class="form-group">
                    <label for="editProfileSpecialization">Specialization</label>
                    <select id="editProfileSpecialization" name="specialization">
                        <option value="general">General Dentistry</option>
                        <option value="orthodontics">Orthodontics</option>
                        <option value="periodontics">Periodontics</option>
                        <option value="endodontics">Endodontics</option>
                        <option value="oral-surgery">Oral Surgery</option>
                        <option value="pediatric">Pediatric Dentistry</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeEditProfileModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Mock data for appointments
        let appointments = [
            {
                id: 1,
                date: '2024-01-15',
                time: '09:00',
                patient: { name: 'John Smith', email: 'john@email.com', phone: '+1234567890' },
                service: 'Dental Cleaning',
                dentist: 'Dr. Maria Santos',
                status: 'confirmed',
                notes: 'Regular cleaning appointment',
                qrCode: 'QR001'
            },
            {
                id: 2,
                date: '2024-01-15',
                time: '10:30',
                patient: { name: 'Sarah Johnson', email: 'sarah@email.com', phone: '+1234567891' },
                service: 'Teeth Whitening',
                dentist: 'Dr. Maria Santos',
                status: 'confirmed',
                notes: 'Teeth whitening treatment',
                qrCode: 'QR002'
            },
            {
                id: 3,
                date: '2024-01-15',
                time: '14:00',
                patient: { name: 'Mike Davis', email: 'mike@email.com', phone: '+1234567892' },
                service: 'Dental Filling',
                dentist: 'Dr. Maria Santos',
                status: 'pending',
                notes: 'Patient booked online - needs confirmation',
                qrCode: null
            }
        ];

        // Initialize sample bookings in localStorage if none exist
        if (!localStorage.getItem('dentalBookings')) {
            const sampleBookings = [
                {
                    id: 4,
                    date: '2024-01-16',
                    time: '09:30',
                    patient: 'Emma Wilson',
                    email: 'emma@email.com',
                    phone: '+1234567893',
                    service: 'Root Canal Treatment',
                    dentist: 'Dr. Maria Santos',
                    status: 'pending',
                    notes: 'Emergency appointment requested'
                },
                {
                    id: 5,
                    date: '2024-01-16',
                    time: '11:00',
                    patient: 'Robert Brown',
                    email: 'robert@email.com',
                    phone: '+1234567894',
                    service: 'Dental Crown',
                    dentist: 'Dr. Maria Santos',
                    status: 'confirmed',
                    notes: 'Crown replacement'
                }
            ];
            localStorage.setItem('dentalBookings', JSON.stringify(sampleBookings));
        }

        function loadAppointments() {
            const tbody = document.getElementById('appointmentsTableBody');
            
            if (!tbody) {
                return;
            }

            // Try Firebase first, fallback to local storage
            if (window.firebase && window.firebase.firestore) {
                loadFromFirebase();
            } else {
                loadLocalAppointments();
            }
        }


        function loadAppointmentsFromServer() {
            
            // Try to fetch from simple server API
            fetch('http://localhost:8001/api/appointments/my-appointments')
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.data) {
                        
                        // Convert server data to local format
                        const serverAppointments = data.data.map(apt => ({
                            id: apt.id,
                            date: apt.date || new Date().toISOString().split('T')[0],
                            time: apt.time || '09:00',
                            patient: {
                                name: apt.patientName || 'Unknown Patient',
                                email: apt.patientEmail || '',
                                phone: apt.patientPhone || ''
                            },
                            service: apt.service || 'Dental Service',
                            dentist: apt.dentistName || 'Dr. Maria Santos',
                            status: apt.status || 'pending',
                            notes: apt.notes || '',
                            qrCode: apt.qrCode || null
                        }));
                        
                        // Display the appointments
                        displayAppointments(serverAppointments);
                        
                        // Store in local storage for backup
                        localStorage.setItem('serverAppointments', JSON.stringify(serverAppointments));
                    } else {
                        loadLocalAppointments();
                    }
                })
                .catch(error => {
                    loadLocalAppointments();
                });
        }

        // Load appointments from Firebase
        function loadFromFirebase() {
            const tbody = document.getElementById('appointmentsTableBody');
            
            if (!tbody) {
                return;
            }

            const db = window.firebase.firestore();
            
            db.collection('appointments')
                .orderBy('createdAt', 'desc')
                .get()
                .then(querySnapshot => {
                    const appointments = [];
                    
                    querySnapshot.forEach(doc => {
                        const appointment = doc.data();
                        appointments.push({
                            id: doc.id,
                            ...appointment
                        });
                    });
                    
                    displayAppointments(appointments);
                })
                .catch(error => {
                    loadLocalAppointments();
                });
        }

        // Display appointments in the table
        function displayAppointments(appointments) {
            const tbody = document.getElementById('appointmentsTableBody');
            tbody.innerHTML = '';
            
            if (appointments.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 20px; color: #666;">
                            No appointments found
                        </td>
                    </tr>
                `;
                return;
            }
            
            appointments.forEach(appointment => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${appointment.patient}</td>
                    <td>${appointment.service}</td>
                    <td>${appointment.dentist}</td>
                    <td>${appointment.date === 'TBD' ? 'To be assigned' : appointment.date}</td>
                    <td>${appointment.time === 'TBD' ? 'To be assigned' : appointment.time}</td>
                    <td>
                        <span class="status-badge ${appointment.status}">${appointment.status.toUpperCase()}</span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            ${appointment.status === 'pending' ? 
                                `<button class="btn btn-sm btn-warning" onclick="confirmAppointment('${appointment.id}')">Confirm</button>` : 
                                ''
                            }
                            ${appointment.status === 'confirmed' ? 
                                `<button class="btn btn-sm btn-success" onclick="completeAppointment('${appointment.id}')">Complete</button>` : 
                                ''
                            }
                            ${appointment.qrCode ? 
                                `<button class="btn btn-sm btn-info" onclick="showQRCode('${appointment.id}')">View QR</button>` : 
                                ''
                            }
                            <button class="btn btn-sm btn-danger" onclick="cancelAppointment('${appointment.id}')">Cancel</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function loadLocalAppointments() {
            const tbody = document.getElementById('appointmentsTableBody');
            console.log('loadLocalAppointments called');
            console.log('tbody element:', tbody);
            
            if (!tbody) {
                console.error('appointmentsTableBody element not found in loadLocalAppointments!');
                return;
            }

            // Get global bookings from patient bookings
            const globalBookings = JSON.parse(localStorage.getItem('dentalBookings')) || [];
            console.log('Global bookings found:', globalBookings.length);
            
            // Convert global bookings to appointment format for display
            const globalAppointments = globalBookings.map(booking => ({
                id: booking.id,
                date: booking.date,
                time: booking.time,
                patient: {
                    name: booking.patient,
                    email: booking.email,
                    phone: booking.phone
                },
                service: booking.service,
                dentist: booking.dentist,
                status: booking.status,
                notes: booking.notes,
                qrCode: booking.status === 'confirmed' ? `QR${String(booking.id).padStart(3, '0')}` : null
            }));

            // Combine local appointments and global bookings
            const allAppointments = [...appointments, ...globalAppointments];
            console.log('Total appointments to display:', allAppointments.length);
            displayAppointments(allAppointments);
        }

        function displayAppointments(allAppointments) {
            const tbody = document.getElementById('appointmentsTableBody');
            console.log('displayAppointments called with', allAppointments.length, 'appointments');
            console.log('tbody element:', tbody);
            
            if (!tbody) {
                console.error('appointmentsTableBody element not found in displayAppointments!');
                // Try to create the table if it doesn't exist
                createAppointmentsTable();
                return;
            }
            
            // Sort by date and time
            allAppointments.sort((a, b) => {
                const dateA = new Date(`${a.date}T${a.time}`);
                const dateB = new Date(`${b.date}T${b.time}`);
                return dateA - dateB;
            });

            // Update pending appointments counter
            const pendingCount = allAppointments.filter(apt => apt.status === 'pending').length;
            const pendingBadge = document.querySelector('.pending-badge');
            if (pendingBadge) {
                pendingBadge.textContent = pendingCount;
                pendingBadge.style.display = pendingCount > 0 ? 'inline' : 'none';
            }

            console.log('Setting tbody innerHTML with', allAppointments.length, 'appointments');
            tbody.innerHTML = allAppointments.map(appointment => `
                <tr data-id="${appointment.id}">
                    <td>
                        <div class="datetime-cell">
                            <strong>${formatDate(appointment.date)}</strong>
                            <br>
                            <span class="time">${formatTime(appointment.time)}</span>
                        </div>
                    </td>
                    <td>
                        <div class="patient-cell">
                            <strong>${appointment.patient.name}</strong>
                            <br>
                            <span class="patient-contact">${appointment.patient.email}</span>
                            <br>
                            <span class="patient-contact">${appointment.patient.phone}</span>
                        </div>
                    </td>
                    <td>
                        <span class="service-name">${appointment.service}</span>
                        ${appointment.notes ? `<br><small class="notes">${appointment.notes}</small>` : ''}
                    </td>
                    <td>
                        <span class="status ${appointment.status}">${appointment.status}</span>
                    </td>
                    <td>
                        ${appointment.status === 'confirmed' ? 
                            `<button class="btn btn-sm btn-info" onclick="showQRCode(${appointment.id})">View QR</button>` : 
                            '<span class="text-muted">Not confirmed</span>'
                        }
                    </td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="startAppointment(${appointment.id})">Start</button>
                        <button class="btn btn-sm btn-secondary" onclick="editAppointment(${appointment.id})">Edit</button>
                        ${appointment.status === 'pending' ? 
                            `<button class="btn btn-sm btn-warning" onclick="confirmAppointment(${appointment.id})">Confirm</button>` : 
                            ''
                        }
                        ${appointment.status === 'confirmed' || appointment.status === 'approved' ? 
                            `<button class="btn btn-sm btn-success" onclick="completeAppointment(${appointment.id})">Complete</button>` : 
                            ''
                        }
                        <button class="btn btn-sm btn-danger" onclick="cancelAppointment(${appointment.id})">Cancel</button>
                    </td>
                </tr>
            `).join('');
        }

        function showPatientBooking() {
            const dashboardContent = document.querySelector('.dashboard-content');
            dashboardContent.innerHTML = `
                <div class="section-header">
                    <h2>Patient Bookings</h2>
                    <button class="btn btn-secondary" onclick="loadAppointments()">Back to Dashboard</button>
                </div>
                <div class="appointments-table" id="appointmentsTable">
                    <table>
                        <thead>
                            <tr>
                                <th>Date & Time</th>
                                <th>Patient</th>
                                <th>Service</th>
                                <th>Status</th>
                                <th>QR Code</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appointmentsTableBody">
                            <!-- Appointments will be loaded here -->
                        </tbody>
                    </table>
                </div>
            `;
            loadAppointments();
        }

        function showAddPatient() {
            alert('Add Patient functionality will be implemented here');
        }

        function showPatientRecords() {
            alert('Patient Records functionality will be implemented here');
        }

        function showReports() {
            alert('Reports functionality will be implemented here');
        }

        function confirmAppointment(appointmentId) {
            if (confirm('Are you sure you want to confirm this appointment?')) {
                // Try Firebase first, fallback to local storage
                if (window.firebase && window.firebase.firestore) {
                    updateFirebaseAppointment(appointmentId, 'confirmed');
                } else {
                    updateLocalAppointment(appointmentId, 'confirmed');
                }
            }
        }
        
        function updateFirebaseAppointment(appointmentId, status) {
            const db = window.firebase.firestore();
            const qrCode = `QR${String(appointmentId).padStart(3, '0')}`;
            
            db.collection('appointments').doc(appointmentId).update({
                status: status,
                qrCode: qrCode,
                updatedAt: new Date()
            })
            .then(() => {
                loadAppointments();
                alert(`‚úÖ Patient booking confirmed! QR Code: ${qrCode}`);
            })
            .catch(error => {
                updateLocalAppointment(appointmentId, status);
            });
        }
        
        function updateLocalAppointment(appointmentId, status) {
            const globalBookings = JSON.parse(localStorage.getItem('dentalBookings')) || [];
            const globalBooking = globalBookings.find(booking => booking.id === appointmentId);
            
            if (globalBooking) {
                globalBooking.status = status;
                globalBooking.qrCode = `QR${String(appointmentId).padStart(3, '0')}`;
                localStorage.setItem('dentalBookings', JSON.stringify(globalBookings));
                loadAppointments();
                alert(`‚úÖ Patient booking confirmed! QR Code: ${globalBooking.qrCode}`);
            } else {
                alert('‚ùå Appointment not found!');
            }
        }

        function completeAppointment(appointmentId) {
            const notes = prompt('Enter completion notes (optional):');
            
            // Try Firebase first, fallback to local storage
            if (window.firebase && window.firebase.firestore) {
                updateFirebaseAppointmentComplete(appointmentId, notes);
            } else {
                updateLocalAppointmentComplete(appointmentId, notes);
            }
        }
        
        function updateFirebaseAppointmentComplete(appointmentId, notes) {
            const db = window.firebase.firestore();
            
            const updateData = {
                status: 'completed',
                updatedAt: new Date()
            };
            
            if (notes) {
                updateData.notes = notes;
            }
            
            db.collection('appointments').doc(appointmentId).update(updateData)
                .then(() => {
                    loadAppointments();
                    alert(`‚úÖ Appointment completed!`);
                })
                .catch(error => {
                    updateLocalAppointmentComplete(appointmentId, notes);
                });
        }
        
        function updateLocalAppointmentComplete(appointmentId, notes) {
            const globalBookings = JSON.parse(localStorage.getItem('dentalBookings')) || [];
            const globalBooking = globalBookings.find(booking => booking.id === appointmentId);
            
            if (globalBooking) {
                globalBooking.status = 'completed';
                if (notes) globalBooking.notes = notes;
                localStorage.setItem('dentalBookings', JSON.stringify(globalBookings));
                loadAppointments();
                alert(`‚úÖ Appointment completed for ${globalBooking.patient}!`);
            } else {
                alert('‚ùå Appointment not found!');
            }
        }

        function editAppointment(appointmentId) {
            const appointment = appointments.find(apt => apt.id === appointmentId);
            if (appointment) {
                const newDate = prompt('Enter new date (YYYY-MM-DD):', appointment.date);
                const newTime = prompt('Enter new time (HH:MM):', appointment.time);
                const newNotes = prompt('Enter additional notes:', appointment.notes);

                if (newDate && newTime) {
                    appointment.date = newDate;
                    appointment.time = newTime;
                    if (newNotes) appointment.notes = newNotes;
                    loadAppointments();
                    alert('Appointment updated successfully!');
                }
            }
        }

        function startAppointment(appointmentId) {
            if (confirm('Are you sure you want to start this appointment?')) {
                // Try to update on server first
                fetch(`http://localhost:8001/api/appointments/${appointmentId}/complete`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ notes: 'Appointment started' })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert(`‚úÖ Appointment started!`);
                        loadAppointments(); // Refresh the list
                    } else {
                        alert('‚ùå Failed to start appointment on server');
                    }
                })
                .catch(error => {
                    console.log('Server update failed, updating locally:', error.message);
                    // Fallback to local update
                    const appointment = appointments.find(apt => apt.id === appointmentId);
                    if (appointment) {
                        appointment.status = 'completed';
                        loadAppointments();
                        alert(`Starting appointment with ${appointment.patient.name} for ${appointment.service}`);
                    } else {
                        alert('‚ùå Appointment not found!');
                    }
                });
            }
        }

        function cancelAppointment(appointmentId) {
            if (confirm('Are you sure you want to cancel this appointment?')) {
                const reason = prompt('Enter cancellation reason (optional):');
                
                // Try Firebase first, fallback to local storage
                if (window.firebase && window.firebase.firestore) {
                    updateFirebaseAppointmentCancel(appointmentId, reason);
                } else {
                    updateLocalAppointmentCancel(appointmentId, reason);
                }
            }
        }
        
        function updateFirebaseAppointmentCancel(appointmentId, reason) {
            const db = window.firebase.firestore();
            
            const updateData = {
                status: 'cancelled',
                updatedAt: new Date()
            };
            
            if (reason) {
                updateData.notes = reason;
            }
            
            db.collection('appointments').doc(appointmentId).update(updateData)
                .then(() => {
                    loadAppointments();
                    alert(`‚úÖ Appointment cancelled!`);
                })
                .catch(error => {
                    updateLocalAppointmentCancel(appointmentId, reason);
                });
        }
        
        function updateLocalAppointmentCancel(appointmentId, reason) {
            const globalBookings = JSON.parse(localStorage.getItem('dentalBookings')) || [];
            const globalBooking = globalBookings.find(booking => booking.id === appointmentId);
            
            if (globalBooking) {
                globalBooking.status = 'cancelled';
                if (reason) globalBooking.notes = reason;
                localStorage.setItem('dentalBookings', JSON.stringify(globalBookings));
                loadAppointments();
                alert(`‚úÖ Appointment cancelled for ${globalBooking.patient}!`);
            } else {
                alert('‚ùå Appointment not found!');
            }
        }

        function showQRCode(appointmentId) {
            const appointment = appointments.find(apt => apt.id === appointmentId);
            if (appointment && appointment.qrCode) {
                alert(`QR Code for ${appointment.patient.name}: ${appointment.qrCode}`);
            }
        }

        function createAppointmentsTable() {
            console.log('Creating appointments table...');
            const dashboardContent = document.querySelector('.dashboard-content');
            if (dashboardContent) {
                // Check if appointments table already exists
                const existingTable = document.getElementById('appointmentsTable');
                if (existingTable) {
                    console.log('Appointments table already exists');
                    return;
                }

                // Create the appointments table
                const appointmentsSection = document.createElement('section');
                appointmentsSection.className = 'appointments-section';
                appointmentsSection.innerHTML = `
                    <div class="section-header">
                        <h2>Today's Appointments</h2>
                        <span class="pending-badge" style="display: none;">0</span>
                    </div>
                    <div class="appointments-table" id="appointmentsTable">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date & Time</th>
                                    <th>Patient</th>
                                    <th>Service</th>
                                    <th>Status</th>
                                    <th>QR Code</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="appointmentsTableBody">
                                <!-- Appointments will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                `;
                
                // Insert at the beginning of dashboard content
                dashboardContent.insertBefore(appointmentsSection, dashboardContent.firstChild);
                console.log('Appointments table created successfully');
            } else {
                console.error('Dashboard content not found');
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function formatTime(timeString) {
            const time = new Date(`2000-01-01T${timeString}`);
            return time.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
        }

        function closeEditProfileModal() {
            document.getElementById('editProfileModal').style.display = 'none';
        }

        // Initialize
        function initializeAppointments() {
            console.log('initializeAppointments called');
            const tbody = document.getElementById('appointmentsTableBody');
            console.log('appointmentsTableBody element found:', tbody !== null);
            
            if (tbody) {
                loadAppointments();
            } else {
                console.error('appointmentsTableBody not found, retrying in 500ms');
                setTimeout(initializeAppointments, 500);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded event fired');
            initializeAppointments();
        });
    </script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- API Client -->
    <script src="assets/js/firebase-config.js"></script>
    
    <!-- Dentist Functions -->
    <script src="dentist-functions.js"></script>
    
    <!-- API Client -->
    <script src="assets/js/api-client.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="assets/js/firebase-config.js"></script>
    
    <script>
        // Firebase integration for dentist dashboard
        function loadAppointmentsFromFirebase() {
            console.log('Loading appointments from Firebase...');
            const tbody = document.getElementById('appointmentsTableBody');
            if (!tbody) return;
            
            if (window.firebase && window.firebase.firestore) {
                const db = window.firebase.firestore();
                
                db.collection('appointments').doc(appointmentId).update({
                    status: 'confirmed',
                    qrCode: `QR${String(appointmentId).padStart(3, '0')}`,
                    confirmedAt: new Date()
                })
                .then(() => {
                    console.log('Appointment confirmed in Firebase');
                    loadAppointments();
                    alert(`‚úÖ Patient booking confirmed! QR Code: QR${String(appointmentId).padStart(3, '0')}`);
                })
                .catch(error => {
                    console.error('Error confirming appointment in Firebase:', error);
                    // Fallback to local storage
                    confirmAppointmentLocal(appointmentId);
                });
            } else {
                // Fallback to local storage
                confirmAppointmentLocal(appointmentId);
            }
        }

        // Override the loadAppointments function to use local storage
        function loadAppointments() {
            loadLocalAppointments();
        }

        // ========================================
        // DENTIST DASHBOARD FUNCTIONS
        // ========================================

        // Navigation Functions
        function showDentistSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.dashboard-section');
            sections.forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            const targetSection = document.getElementById(`${sectionName}-section`);
            if (targetSection) {
                targetSection.style.display = 'flex';
            }
            
            // Update navigation
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Highlight active nav item
            const activeNav = document.querySelector(`[href="#${sectionName}"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }
            
            // Load section-specific data
            loadDentistSectionData(sectionName);
        }

        function loadDentistSectionData(sectionName) {
            switch(sectionName) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'schedule':
                    loadSchedule();
                    break;
                case 'appointments':
                    loadAppointments();
                    break;
                case 'patients':
                    loadPatients();
                    break;
                case 'services':
                    loadServices();
                    break;
                case 'reports':
                    loadReports();
                    break;
                case 'settings':
                    loadDentistSettings();
                    break;
            }
        }

        // Dashboard Functions
        function loadDashboardData() {
            // Load dashboard statistics
            const stats = {
                todayAppointments: 8,
                totalPatients: 156,
                completedToday: 5,
                todayRevenue: '‚Ç±25,000'
            };
            
            // Update stat cards
            document.querySelectorAll('.stat-value').forEach((stat, index) => {
                const values = Object.values(stats);
                if (values[index]) {
                    stat.textContent = values[index];
                }
            });
        }

        // Schedule Functions
        function loadSchedule() {
            const scheduleContainer = document.querySelector('.dashboard-content');
            if (!scheduleContainer) return;
            
            scheduleContainer.innerHTML = `
                <div class="section-header">
                    <h2>üìÖ Schedule Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addScheduleSlot()">
                            <i class="fas fa-plus"></i> Add Time Slot
                        </button>
                        <button class="btn btn-secondary" onclick="viewCalendar()">
                            <i class="fas fa-calendar"></i> Calendar View
                        </button>
                    </div>
                </div>
                
                <div class="schedule-grid">
                    <div class="schedule-card">
                        <h3>Today's Schedule</h3>
                        <div class="time-slots">
                            <div class="time-slot">
                                <span class="time">09:00 AM</span>
                                <span class="patient">John Smith - Cleaning</span>
                                <span class="status confirmed">Confirmed</span>
                            </div>
                            <div class="time-slot">
                                <span class="time">10:30 AM</span>
                                <span class="patient">Sarah Johnson - Whitening</span>
                                <span class="status confirmed">Confirmed</span>
                            </div>
                            <div class="time-slot">
                                <span class="time">02:00 PM</span>
                                <span class="patient">Mike Davis - Filling</span>
                                <span class="status pending">Pending</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="schedule-card">
                        <h3>Available Slots</h3>
                        <div class="time-slots">
                            <div class="time-slot available">
                                <span class="time">11:00 AM</span>
                                <span class="patient">Available</span>
                                <button class="btn btn-sm" onclick="bookSlot('11:00')">Book</button>
                            </div>
                            <div class="time-slot available">
                                <span class="time">03:30 PM</span>
                                <span class="patient">Available</span>
                                <button class="btn btn-sm" onclick="bookSlot('15:30')">Book</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="schedule-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total Appointments</span>
                        <span class="stat-value">8</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Completed</span>
                        <span class="stat-value">5</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Pending</span>
                        <span class="stat-value">2</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Available</span>
                        <span class="stat-value">3</span>
                    </div>
                </div>
                
                <!-- Calendar View -->
                <div class="calendar-section">
                    <div class="calendar-header">
                        <h3>üìÖ Monthly Calendar View</h3>
                        <div class="calendar-controls">
                            <button class="btn btn-sm btn-secondary" onclick="previousMonth()">
                                <i class="fas fa-chevron-left"></i> Previous
                            </button>
                            <span id="currentMonthYear">January 2025</span>
                            <button class="btn btn-sm btn-secondary" onclick="nextMonth()">
                                Next <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="calendar-container">
                        <div class="calendar-grid">
                            <div class="calendar-weekdays">
                                <div class="weekday">Mon</div>
                                <div class="weekday">Tue</div>
                                <div class="weekday">Wed</div>
                                <div class="weekday">Thu</div>
                                <div class="weekday">Fri</div>
                                <div class="weekday">Sat</div>
                                <div class="weekday">Sun</div>
                            </div>
                            
                            <div class="calendar-days" id="calendarDays">
                                <!-- Calendar days will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <div class="legend-color confirmed"></div>
                            <span>Confirmed Appointments</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color pending"></div>
                            <span>Pending Appointments</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color available"></div>
                            <span>Available Slots</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color today"></div>
                            <span>Today</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Generate the calendar after the HTML is loaded
            setTimeout(() => {
                generateCalendar();
            }, 100);
        }

        function addScheduleSlot() {
            showModal('Add Time Slot', `
                <form id="scheduleForm">
                    <div class="form-group">
                        <label for="slotDate">Date:</label>
                        <input type="date" id="slotDate" required>
                    </div>
                    <div class="form-group">
                        <label for="slotTime">Time:</label>
                        <input type="time" id="slotTime" required>
                    </div>
                    <div class="form-group">
                        <label for="slotDuration">Duration (minutes):</label>
                        <select id="slotDuration">
                            <option value="30">30 minutes</option>
                            <option value="60" selected>60 minutes</option>
                            <option value="90">90 minutes</option>
                            <option value="120">120 minutes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="slotType">Slot Type:</label>
                        <select id="slotType">
                            <option value="general">General</option>
                            <option value="emergency">Emergency</option>
                            <option value="consultation">Consultation</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üìÖ Add Slot</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('scheduleForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const date = document.getElementById('slotDate').value;
                const time = document.getElementById('slotTime').value;
                const duration = document.getElementById('slotDuration').value;
                const type = document.getElementById('slotType').value;
                
                if (date && time) {
                    showToast(`üìÖ Time slot added: ${date} at ${time}`, 'success');
                    this.parentElement.parentElement.remove();
                    loadSchedule(); // Refresh schedule
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function bookSlot(time) {
            showModal('Book Time Slot', `
                <form id="bookSlotForm">
                    <div class="form-group">
                        <label for="patientName">Patient Name:</label>
                        <input type="text" id="patientName" required>
                    </div>
                    <div class="form-group">
                        <label for="patientPhone">Phone:</label>
                        <input type="tel" id="patientPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceType">Service:</label>
                        <select id="serviceType" required>
                            <option value="">Select Service</option>
                            <option value="cleaning">Dental Cleaning</option>
                            <option value="checkup">Dental Checkup</option>
                            <option value="filling">Dental Filling</option>
                            <option value="extraction">Tooth Extraction</option>
                            <option value="whitening">Teeth Whitening</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="notes">Notes:</label>
                        <textarea id="notes" rows="3" placeholder="Additional notes..."></textarea>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üìÖ Book Appointment</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('bookSlotForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('patientName').value;
                const phone = document.getElementById('patientPhone').value;
                const service = document.getElementById('serviceType').value;
                const notes = document.getElementById('notes').value;
                
                if (name && phone && service) {
                    showToast(`üìÖ Appointment booked for ${name} at ${time}`, 'success');
                    this.parentElement.parentElement.remove();
                    loadSchedule(); // Refresh schedule
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function viewCalendar() {
            showModal('Calendar View', `
                <div class="calendar-view">
                    <h3>üìÖ Monthly Calendar</h3>
                    <div class="calendar-grid">
                        <div class="calendar-header">
                            <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span><span>Sun</span>
                        </div>
                        <div class="calendar-body">
                            ${Array(35).fill(0).map((_, i) => `
                                <div class="calendar-day ${i < 7 ? 'has-appointment' : ''}">
                                    <span class="day-number">${i + 1}</span>
                                    ${i < 7 ? '<div class="appointment-dot"></div>' : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <div class="appointment-dot"></div>
                            <span>Has Appointments</span>
                        </div>
                    </div>
                </div>
            `);
        }

        // Calendar Functions
        let currentDate = new Date();
        let currentMonth = 0; // January
        let currentYear = 2025; // Set to 2025

        function generateCalendar() {
            const calendarDays = document.getElementById('calendarDays');
            if (!calendarDays) return;

            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay() + 1); // Start from Monday

            const appointments = getAppointmentsForMonth();
            const today = new Date();
            
            calendarDays.innerHTML = '';

            // Generate 42 days (6 weeks)
            for (let i = 0; i < 42; i++) {
                const dayDate = new Date(startDate);
                dayDate.setDate(startDate.getDate() + i);
                
                const dayNumber = dayDate.getDate();
                const isCurrentMonth = dayDate.getMonth() === currentMonth;
                const isToday = dayDate.toDateString() === today.toDateString();
                
                const dayAppointments = appointments.filter(apt => {
                    const aptDate = new Date(apt.date);
                    return aptDate.toDateString() === dayDate.toDateString();
                });

                const confirmedCount = dayAppointments.filter(apt => apt.status === 'confirmed').length;
                const pendingCount = dayAppointments.filter(apt => apt.status === 'pending').length;
                const totalCount = dayAppointments.length;

                let dayClass = 'calendar-day';
                if (!isCurrentMonth) dayClass += ' other-month';
                if (isToday) dayClass += ' today';
                if (totalCount > 0) dayClass += ' has-appointments';
                if (confirmedCount > 0) dayClass += ' has-confirmed';
                if (pendingCount > 0) dayClass += ' has-pending';

                const dayElement = document.createElement('div');
                dayElement.className = dayClass;
                dayElement.onclick = () => showDayAppointments(dayDate, dayAppointments);
                
                dayElement.innerHTML = `
                    <div class="day-number">${dayNumber}</div>
                    <div class="appointment-count">
                        ${totalCount > 0 ? `
                            <div class="appointment-dots">
                                ${confirmedCount > 0 ? `<div class="appointment-dot confirmed"></div>` : ''}
                                ${pendingCount > 0 ? `<div class="appointment-dot pending"></div>` : ''}
                            </div>
                            <div class="appointment-count-text">${totalCount}</div>
                        ` : ''}
                    </div>
                `;

                calendarDays.appendChild(dayElement);
            }

            // Update month/year display
            const monthNames = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            document.getElementById('currentMonthYear').textContent = 
                `${monthNames[currentMonth]} ${currentYear}`;
        }

        function getAppointmentsForMonth() {
            // Sample appointment data for 2025
            const appointments = [
                // January 2025
                {
                    id: 1,
                    date: '2025-01-15',
                    time: '09:00',
                    patient: 'John Smith',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 2,
                    date: '2025-01-15',
                    time: '10:30',
                    patient: 'Sarah Johnson',
                    service: 'Teeth Whitening',
                    status: 'confirmed'
                },
                {
                    id: 3,
                    date: '2025-01-15',
                    time: '14:00',
                    patient: 'Mike Davis',
                    service: 'Dental Filling',
                    status: 'pending'
                },
                {
                    id: 4,
                    date: '2025-01-16',
                    time: '09:30',
                    patient: 'Emma Wilson',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 5,
                    date: '2025-01-16',
                    time: '11:00',
                    patient: 'Robert Brown',
                    service: 'Dental Crown',
                    status: 'confirmed'
                },
                {
                    id: 6,
                    date: '2025-01-18',
                    time: '10:00',
                    patient: 'Lisa Garcia',
                    service: 'Dental Checkup',
                    status: 'confirmed'
                },
                {
                    id: 7,
                    date: '2025-01-20',
                    time: '14:30',
                    patient: 'David Lee',
                    service: 'Tooth Extraction',
                    status: 'pending'
                },
                {
                    id: 8,
                    date: '2025-01-22',
                    time: '09:00',
                    patient: 'Maria Rodriguez',
                    service: 'Teeth Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 9,
                    date: '2025-01-25',
                    time: '11:30',
                    patient: 'James Wilson',
                    service: 'Dental Implant',
                    status: 'pending'
                },
                {
                    id: 10,
                    date: '2025-01-28',
                    time: '15:00',
                    patient: 'Anna Taylor',
                    service: 'Orthodontic Consultation',
                    status: 'confirmed'
                },
                // February 2025
                {
                    id: 11,
                    date: '2025-02-03',
                    time: '09:00',
                    patient: 'Michael Chen',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 12,
                    date: '2025-02-05',
                    time: '10:30',
                    patient: 'Jennifer Lopez',
                    service: 'Teeth Whitening',
                    status: 'pending'
                },
                {
                    id: 13,
                    date: '2025-02-08',
                    time: '14:00',
                    patient: 'Christopher Lee',
                    service: 'Dental Filling',
                    status: 'confirmed'
                },
                {
                    id: 14,
                    date: '2025-02-12',
                    time: '09:30',
                    patient: 'Amanda Garcia',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 15,
                    date: '2025-02-15',
                    time: '11:00',
                    patient: 'Daniel Kim',
                    service: 'Dental Crown',
                    status: 'confirmed'
                },
                // March 2025
                {
                    id: 16,
                    date: '2025-03-02',
                    time: '10:00',
                    patient: 'Rachel Green',
                    service: 'Dental Checkup',
                    status: 'confirmed'
                },
                {
                    id: 17,
                    date: '2025-03-05',
                    time: '14:30',
                    patient: 'Kevin Park',
                    service: 'Tooth Extraction',
                    status: 'pending'
                },
                {
                    id: 18,
                    date: '2025-03-08',
                    time: '09:00',
                    patient: 'Sofia Martinez',
                    service: 'Teeth Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 19,
                    date: '2025-03-12',
                    time: '11:30',
                    patient: 'Alex Thompson',
                    service: 'Dental Implant',
                    status: 'pending'
                },
                {
                    id: 20,
                    date: '2025-03-15',
                    time: '15:00',
                    patient: 'Isabella Rodriguez',
                    service: 'Orthodontic Consultation',
                    status: 'confirmed'
                },
                // April 2025
                {
                    id: 21,
                    date: '2025-04-01',
                    time: '09:00',
                    patient: 'William Johnson',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 22,
                    date: '2025-04-04',
                    time: '10:30',
                    patient: 'Olivia Davis',
                    service: 'Teeth Whitening',
                    status: 'pending'
                },
                {
                    id: 23,
                    date: '2025-04-07',
                    time: '14:00',
                    patient: 'Ethan Wilson',
                    service: 'Dental Filling',
                    status: 'confirmed'
                },
                {
                    id: 24,
                    date: '2025-04-10',
                    time: '09:30',
                    patient: 'Ava Brown',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 25,
                    date: '2025-04-14',
                    time: '11:00',
                    patient: 'Noah Garcia',
                    service: 'Dental Crown',
                    status: 'confirmed'
                },
                // May 2025
                {
                    id: 26,
                    date: '2025-05-02',
                    time: '10:00',
                    patient: 'Mia Anderson',
                    service: 'Dental Checkup',
                    status: 'confirmed'
                },
                {
                    id: 27,
                    date: '2025-05-06',
                    time: '14:30',
                    patient: 'Liam Taylor',
                    service: 'Tooth Extraction',
                    status: 'pending'
                },
                {
                    id: 28,
                    date: '2025-05-09',
                    time: '09:00',
                    patient: 'Charlotte White',
                    service: 'Teeth Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 29,
                    date: '2025-05-13',
                    time: '11:30',
                    patient: 'Benjamin Clark',
                    service: 'Dental Implant',
                    status: 'pending'
                },
                {
                    id: 30,
                    date: '2025-05-16',
                    time: '15:00',
                    patient: 'Amelia Lewis',
                    service: 'Orthodontic Consultation',
                    status: 'confirmed'
                },
                // June 2025
                {
                    id: 31,
                    date: '2025-06-03',
                    time: '09:00',
                    patient: 'Lucas Walker',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 32,
                    date: '2025-06-06',
                    time: '10:30',
                    patient: 'Harper Hall',
                    service: 'Teeth Whitening',
                    status: 'pending'
                },
                {
                    id: 33,
                    date: '2025-06-10',
                    time: '14:00',
                    patient: 'Henry Allen',
                    service: 'Dental Filling',
                    status: 'confirmed'
                },
                {
                    id: 34,
                    date: '2025-06-13',
                    time: '09:30',
                    patient: 'Evelyn Young',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 35,
                    date: '2025-06-17',
                    time: '11:00',
                    patient: 'Alexander King',
                    service: 'Dental Crown',
                    status: 'confirmed'
                },
                // July 2025
                {
                    id: 36,
                    date: '2025-07-01',
                    time: '10:00',
                    patient: 'Abigail Wright',
                    service: 'Dental Checkup',
                    status: 'confirmed'
                },
                {
                    id: 37,
                    date: '2025-07-05',
                    time: '14:30',
                    patient: 'Mason Lopez',
                    service: 'Tooth Extraction',
                    status: 'pending'
                },
                {
                    id: 38,
                    date: '2025-07-08',
                    time: '09:00',
                    patient: 'Emily Hill',
                    service: 'Teeth Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 39,
                    date: '2025-07-12',
                    time: '11:30',
                    patient: 'Sebastian Scott',
                    service: 'Dental Implant',
                    status: 'pending'
                },
                {
                    id: 40,
                    date: '2025-07-15',
                    time: '15:00',
                    patient: 'Madison Green',
                    service: 'Orthodontic Consultation',
                    status: 'confirmed'
                },
                // August 2025
                {
                    id: 41,
                    date: '2025-08-02',
                    time: '09:00',
                    patient: 'Jackson Adams',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 42,
                    date: '2025-08-05',
                    time: '10:30',
                    patient: 'Scarlett Baker',
                    service: 'Teeth Whitening',
                    status: 'pending'
                },
                {
                    id: 43,
                    date: '2025-08-09',
                    time: '14:00',
                    patient: 'Aiden Nelson',
                    service: 'Dental Filling',
                    status: 'confirmed'
                },
                {
                    id: 44,
                    date: '2025-08-12',
                    time: '09:30',
                    patient: 'Victoria Carter',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 45,
                    date: '2025-08-16',
                    time: '11:00',
                    patient: 'Carter Mitchell',
                    service: 'Dental Crown',
                    status: 'confirmed'
                },
                // September 2025
                {
                    id: 46,
                    date: '2025-09-03',
                    time: '10:00',
                    patient: 'Grace Perez',
                    service: 'Dental Checkup',
                    status: 'confirmed'
                },
                {
                    id: 47,
                    date: '2025-09-06',
                    time: '14:30',
                    patient: 'Owen Roberts',
                    service: 'Tooth Extraction',
                    status: 'pending'
                },
                {
                    id: 48,
                    date: '2025-09-10',
                    time: '09:00',
                    patient: 'Chloe Turner',
                    service: 'Teeth Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 49,
                    date: '2025-09-13',
                    time: '11:30',
                    patient: 'Wyatt Phillips',
                    service: 'Dental Implant',
                    status: 'pending'
                },
                {
                    id: 50,
                    date: '2025-09-17',
                    time: '15:00',
                    patient: 'Lily Campbell',
                    service: 'Orthodontic Consultation',
                    status: 'confirmed'
                },
                // October 2025
                {
                    id: 51,
                    date: '2025-10-01',
                    time: '09:00',
                    patient: 'Grayson Parker',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 52,
                    date: '2025-10-04',
                    time: '10:30',
                    patient: 'Natalie Evans',
                    service: 'Teeth Whitening',
                    status: 'pending'
                },
                {
                    id: 53,
                    date: '2025-10-08',
                    time: '14:00',
                    patient: 'Leo Edwards',
                    service: 'Dental Filling',
                    status: 'confirmed'
                },
                {
                    id: 54,
                    date: '2025-10-11',
                    time: '09:30',
                    patient: 'Zoe Collins',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 55,
                    date: '2025-10-15',
                    time: '11:00',
                    patient: 'Julian Stewart',
                    service: 'Dental Crown',
                    status: 'confirmed'
                },
                // November 2025
                {
                    id: 56,
                    date: '2025-11-02',
                    time: '10:00',
                    patient: 'Hannah Sanchez',
                    service: 'Dental Checkup',
                    status: 'confirmed'
                },
                {
                    id: 57,
                    date: '2025-11-06',
                    time: '14:30',
                    patient: 'Gabriel Morris',
                    service: 'Tooth Extraction',
                    status: 'pending'
                },
                {
                    id: 58,
                    date: '2025-11-09',
                    time: '09:00',
                    patient: 'Layla Rogers',
                    service: 'Teeth Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 59,
                    date: '2025-11-13',
                    time: '11:30',
                    patient: 'Isaac Reed',
                    service: 'Dental Implant',
                    status: 'pending'
                },
                {
                    id: 60,
                    date: '2025-11-17',
                    time: '15:00',
                    patient: 'Nora Cook',
                    service: 'Orthodontic Consultation',
                    status: 'confirmed'
                },
                // December 2025
                {
                    id: 61,
                    date: '2025-12-01',
                    time: '09:00',
                    patient: 'Caleb Morgan',
                    service: 'Dental Cleaning',
                    status: 'confirmed'
                },
                {
                    id: 62,
                    date: '2025-12-04',
                    time: '10:30',
                    patient: 'Aria Bell',
                    service: 'Teeth Whitening',
                    status: 'pending'
                },
                {
                    id: 63,
                    date: '2025-12-08',
                    time: '14:00',
                    patient: 'Ryan Murphy',
                    service: 'Dental Filling',
                    status: 'confirmed'
                },
                {
                    id: 64,
                    date: '2025-12-11',
                    time: '09:30',
                    patient: 'Savannah Bailey',
                    service: 'Root Canal',
                    status: 'pending'
                },
                {
                    id: 65,
                    date: '2025-12-15',
                    time: '11:00',
                    patient: 'Nathan Rivera',
                    service: 'Dental Crown',
                    status: 'confirmed'
                }
            ];

            return appointments.filter(apt => {
                const aptDate = new Date(apt.date);
                return aptDate.getMonth() === currentMonth && aptDate.getFullYear() === currentYear;
            });
        }

        function showDayAppointments(date, appointments) {
            const dateStr = date.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });

            if (appointments.length === 0) {
                showModal(`üìÖ ${dateStr}`, `
                    <div class="day-appointments">
                        <h3>No appointments scheduled for this day</h3>
                        <p>This day is available for new bookings.</p>
                        <button class="btn btn-primary" onclick="addScheduleSlot()">
                            <i class="fas fa-plus"></i> Add Time Slot
                        </button>
                    </div>
                `);
                return;
            }

            const appointmentsList = appointments.map(apt => `
                <div class="appointment-item">
                    <div class="appointment-time">${apt.time}</div>
                    <div class="appointment-details">
                        <strong>${apt.patient}</strong>
                        <p>${apt.service}</p>
                    </div>
                    <div class="appointment-status">
                        <span class="status ${apt.status}">${apt.status}</span>
                    </div>
                </div>
            `).join('');

            showModal(`üìÖ ${dateStr}`, `
                <div class="day-appointments">
                    <h3>Appointments for ${dateStr}</h3>
                    <div class="appointments-list">
                        ${appointmentsList}
                    </div>
                    <div class="day-actions">
                        <button class="btn btn-primary" onclick="addScheduleSlot()">
                            <i class="fas fa-plus"></i> Add Time Slot
                        </button>
                        <button class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">
                            Close
                        </button>
                    </div>
                </div>
            `);
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        // Patients Functions
        function loadPatients() {
            const patientsContainer = document.querySelector('.dashboard-content');
            if (!patientsContainer) return;
            
            const patients = [
                {
                    id: 1,
                    name: 'John Smith',
                    email: 'john@email.com',
                    phone: '+1234567890',
                    lastVisit: '2024-01-10',
                    totalVisits: 5,
                    status: 'Active'
                },
                {
                    id: 2,
                    name: 'Sarah Johnson',
                    email: 'sarah@email.com',
                    phone: '+1234567891',
                    lastVisit: '2024-01-12',
                    totalVisits: 3,
                    status: 'Active'
                },
                {
                    id: 3,
                    name: 'Mike Davis',
                    email: 'mike@email.com',
                    phone: '+1234567892',
                    lastVisit: '2023-12-15',
                    totalVisits: 2,
                    status: 'Inactive'
                }
            ];
            
            patientsContainer.innerHTML = `
                <div class="section-header">
                    <h2>üë• Patient Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addNewPatient()">
                            <i class="fas fa-user-plus"></i> Add Patient
                        </button>
                        <button class="btn btn-secondary" onclick="exportPatients()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="patients-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Contact</th>
                                <th>Last Visit</th>
                                <th>Total Visits</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${patients.map(patient => `
                                <tr>
                                    <td>
                                        <div class="patient-info">
                                            <strong>${patient.name}</strong>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="contact-info">
                                            <div>${patient.email}</div>
                                            <div>${patient.phone}</div>
                                        </div>
                                    </td>
                                    <td>${patient.lastVisit}</td>
                                    <td>${patient.totalVisits}</td>
                                    <td>
                                        <span class="status ${patient.status.toLowerCase()}">${patient.status}</span>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm" onclick="viewPatientDetails(${patient.id})">View</button>
                                        <button class="btn btn-sm btn-secondary" onclick="editPatient(${patient.id})">Edit</button>
                                        <button class="btn btn-sm btn-info" onclick="viewPatientHistory(${patient.id})">History</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function addNewPatient() {
            showModal('Add New Patient', `
                <form id="patientForm">
                    <div class="form-group">
                        <label for="patientFullName">Full Name:</label>
                        <input type="text" id="patientFullName" required>
                    </div>
                    <div class="form-group">
                        <label for="patientEmail">Email:</label>
                        <input type="email" id="patientEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="patientPhone">Phone:</label>
                        <input type="tel" id="patientPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="patientAddress">Address:</label>
                        <textarea id="patientAddress" rows="3" placeholder="Enter patient address"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="patientBirthdate">Birth Date:</label>
                        <input type="date" id="patientBirthdate">
                    </div>
                    <div class="form-group">
                        <label for="patientGender">Gender:</label>
                        <select id="patientGender">
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="patientNotes">Medical Notes:</label>
                        <textarea id="patientNotes" rows="3" placeholder="Any medical conditions or allergies..."></textarea>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üë§ Add Patient</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('patientForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('patientFullName').value;
                const email = document.getElementById('patientEmail').value;
                const phone = document.getElementById('patientPhone').value;
                const address = document.getElementById('patientAddress').value;
                const birthdate = document.getElementById('patientBirthdate').value;
                const gender = document.getElementById('patientGender').value;
                const notes = document.getElementById('patientNotes').value;
                
                if (name && email && phone) {
                    showToast(`üë§ Patient ${name} added successfully!`, 'success');
                    this.parentElement.parentElement.remove();
                    loadPatients(); // Refresh patients list
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function viewPatientDetails(patientId) {
            const patient = {
                1: {
                    name: 'John Smith',
                    email: 'john@email.com',
                    phone: '+1234567890',
                    address: '123 Main St, Manila',
                    birthdate: '1990-01-15',
                    gender: 'Male',
                    lastVisit: '2024-01-10',
                    totalVisits: 5,
                    medicalNotes: 'No known allergies',
                    emergencyContact: 'Jane Smith - +1234567899'
                }
            };
            
            const patientData = patient[patientId];
            if (patientData) {
                showModal('Patient Details', `
                    <div class="patient-details">
                        <h3>${patientData.name}</h3>
                        <div class="detail-row">
                            <strong>Email:</strong> ${patientData.email}
                        </div>
                        <div class="detail-row">
                            <strong>Phone:</strong> ${patientData.phone}
                        </div>
                        <div class="detail-row">
                            <strong>Address:</strong> ${patientData.address}
                        </div>
                        <div class="detail-row">
                            <strong>Birth Date:</strong> ${patientData.birthdate}
                        </div>
                        <div class="detail-row">
                            <strong>Gender:</strong> ${patientData.gender}
                        </div>
                        <div class="detail-row">
                            <strong>Last Visit:</strong> ${patientData.lastVisit}
                        </div>
                        <div class="detail-row">
                            <strong>Total Visits:</strong> ${patientData.totalVisits}
                        </div>
                        <div class="detail-row">
                            <strong>Medical Notes:</strong> ${patientData.medicalNotes}
                        </div>
                        <div class="detail-row">
                            <strong>Emergency Contact:</strong> ${patientData.emergencyContact}
                        </div>
                    </div>
                `);
            }
        }

        function editPatient(patientId) {
            showModal('Edit Patient', `
                <form id="editPatientForm">
                    <div class="form-group">
                        <label for="editPatientName">Full Name:</label>
                        <input type="text" id="editPatientName" value="John Smith" required>
                    </div>
                    <div class="form-group">
                        <label for="editPatientEmail">Email:</label>
                        <input type="email" id="editPatientEmail" value="john@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="editPatientPhone">Phone:</label>
                        <input type="tel" id="editPatientPhone" value="+1234567890" required>
                    </div>
                    <div class="form-group">
                        <label for="editPatientAddress">Address:</label>
                        <textarea id="editPatientAddress" rows="3">123 Main St, Manila</textarea>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üíæ Save Changes</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('editPatientForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('editPatientName').value;
                const email = document.getElementById('editPatientEmail').value;
                const phone = document.getElementById('editPatientPhone').value;
                
                if (name && email && phone) {
                    showToast(`üíæ Patient ${name} updated successfully!`, 'success');
                    this.parentElement.parentElement.remove();
                    loadPatients(); // Refresh patients list
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function viewPatientHistory(patientId) {
            showModal('Patient History', `
                <div class="patient-history">
                    <h3>Medical History - John Smith</h3>
                    <div class="history-timeline">
                        <div class="history-item">
                            <div class="history-date">2024-01-10</div>
                            <div class="history-content">
                                <strong>Dental Cleaning</strong>
                                <p>Regular cleaning appointment. No issues found.</p>
                            </div>
                        </div>
                        <div class="history-item">
                            <div class="history-date">2023-12-15</div>
                            <div class="history-content">
                                <strong>Dental Checkup</strong>
                                <p>Annual checkup. Recommended regular cleaning.</p>
                            </div>
                        </div>
                        <div class="history-item">
                            <div class="history-date">2023-10-20</div>
                            <div class="history-content">
                                <strong>Tooth Extraction</strong>
                                <p>Wisdom tooth extraction. Recovery went well.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `);
        }

        function exportPatients() {
            showToast('üì• Exporting patients data...', 'info');
            setTimeout(() => {
                showToast('‚úÖ Patients data exported successfully!', 'success');
            }, 2000);
        }

        // Services Functions
        function loadServices() {
            const servicesContainer = document.querySelector('.dashboard-content');
            if (!servicesContainer) return;
            
            const services = [
                {
                    id: 1,
                    name: 'Dental Cleaning',
                    price: '‚Ç±2,500',
                    duration: '60 minutes',
                    description: 'Professional dental cleaning and scaling'
                },
                {
                    id: 2,
                    name: 'Teeth Whitening',
                    price: '‚Ç±8,000',
                    duration: '90 minutes',
                    description: 'Professional teeth whitening treatment'
                },
                {
                    id: 3,
                    name: 'Dental Filling',
                    price: '‚Ç±3,500',
                    duration: '45 minutes',
                    description: 'Tooth filling with composite material'
                }
            ];
            
            servicesContainer.innerHTML = `
                <div class="section-header">
                    <h2>üõ†Ô∏è Services Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="addNewService()">
                            <i class="fas fa-plus"></i> Add Service
                        </button>
                        <button class="btn btn-secondary" onclick="exportServices()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="services-grid">
                    ${services.map(service => `
                        <div class="service-card">
                            <h3>${service.name}</h3>
                            <div class="service-price">${service.price}</div>
                            <div class="service-duration">${service.duration}</div>
                            <p class="service-description">${service.description}</p>
                            <div class="service-actions">
                                <button class="btn btn-sm" onclick="editService(${service.id})">Edit</button>
                                <button class="btn btn-sm btn-secondary" onclick="viewServiceDetails(${service.id})">Details</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteService(${service.id})">Delete</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function addNewService() {
            showModal('Add New Service', `
                <form id="serviceForm">
                    <div class="form-group">
                        <label for="serviceName">Service Name:</label>
                        <input type="text" id="serviceName" required>
                    </div>
                    <div class="form-group">
                        <label for="servicePrice">Price:</label>
                        <input type="number" id="servicePrice" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceDuration">Duration (minutes):</label>
                        <input type="number" id="serviceDuration" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceDescription">Description:</label>
                        <textarea id="serviceDescription" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="serviceCategory">Category:</label>
                        <select id="serviceCategory">
                            <option value="general">General Dentistry</option>
                            <option value="cosmetic">Cosmetic</option>
                            <option value="restorative">Restorative</option>
                            <option value="preventive">Preventive</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üõ†Ô∏è Add Service</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('serviceForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('serviceName').value;
                const price = document.getElementById('servicePrice').value;
                const duration = document.getElementById('serviceDuration').value;
                const description = document.getElementById('serviceDescription').value;
                const category = document.getElementById('serviceCategory').value;
                
                if (name && price && duration && description) {
                    showToast(`üõ†Ô∏è Service ${name} added successfully!`, 'success');
                    this.parentElement.parentElement.remove();
                    loadServices(); // Refresh services list
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function editService(serviceId) {
            showModal('Edit Service', `
                <form id="editServiceForm">
                    <div class="form-group">
                        <label for="editServiceName">Service Name:</label>
                        <input type="text" id="editServiceName" value="Dental Cleaning" required>
                    </div>
                    <div class="form-group">
                        <label for="editServicePrice">Price:</label>
                        <input type="number" id="editServicePrice" value="2500" required>
                    </div>
                    <div class="form-group">
                        <label for="editServiceDuration">Duration (minutes):</label>
                        <input type="number" id="editServiceDuration" value="60" required>
                    </div>
                    <div class="form-group">
                        <label for="editServiceDescription">Description:</label>
                        <textarea id="editServiceDescription" rows="3" required>Professional dental cleaning and scaling</textarea>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üíæ Save Changes</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('editServiceForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('editServiceName').value;
                const price = document.getElementById('editServicePrice').value;
                const duration = document.getElementById('editServiceDuration').value;
                const description = document.getElementById('editServiceDescription').value;
                
                if (name && price && duration && description) {
                    showToast(`üíæ Service ${name} updated successfully!`, 'success');
                    this.parentElement.parentElement.remove();
                    loadServices(); // Refresh services list
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function viewServiceDetails(serviceId) {
            showModal('Service Details', `
                <div class="service-details">
                    <h3>Dental Cleaning</h3>
                    <div class="detail-row">
                        <strong>Price:</strong> ‚Ç±2,500
                    </div>
                    <div class="detail-row">
                        <strong>Duration:</strong> 60 minutes
                    </div>
                    <div class="detail-row">
                        <strong>Category:</strong> General Dentistry
                    </div>
                    <div class="detail-row">
                        <strong>Description:</strong> Professional dental cleaning and scaling
                    </div>
                    <div class="detail-row">
                        <strong>Popularity:</strong> High (most booked service)
                    </div>
                </div>
            `);
        }

        function deleteService(serviceId) {
            if (confirm('Are you sure you want to delete this service?')) {
                showToast('üóëÔ∏è Service deleted successfully!', 'success');
                loadServices(); // Refresh services list
            }
        }

        function exportServices() {
            showToast('üì• Exporting services data...', 'info');
            setTimeout(() => {
                showToast('‚úÖ Services data exported successfully!', 'success');
            }, 2000);
        }

        // Reports Functions
        function loadReports() {
            const reportsContainer = document.querySelector('.dashboard-content');
            if (!reportsContainer) return;
            
            reportsContainer.innerHTML = `
                <div class="section-header">
                    <h2>üìä Reports & Analytics</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="generateReport()">
                            <i class="fas fa-chart-line"></i> Generate Report
                        </button>
                        <button class="btn btn-secondary" onclick="exportReport()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="reports-grid">
                    <div class="report-card">
                        <h3>üìà Monthly Revenue</h3>
                        <div class="report-chart">
                            <div class="chart-bar" style="height: 60%">Jan</div>
                            <div class="chart-bar" style="height: 80%">Feb</div>
                            <div class="chart-bar" style="height: 100%">Mar</div>
                            <div class="chart-bar" style="height: 70%">Apr</div>
                        </div>
                        <div class="report-value">‚Ç±125,000</div>
                    </div>
                    
                    <div class="report-card">
                        <h3>üë• Patient Growth</h3>
                        <div class="report-stats">
                            <div class="stat-item">
                                <span class="stat-label">New Patients</span>
                                <span class="stat-value">+12</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Returning</span>
                                <span class="stat-value">+8</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-card">
                        <h3>ü¶∑ Popular Services</h3>
                        <div class="service-stats">
                            <div class="service-item">
                                <span>Dental Cleaning</span>
                                <span>45%</span>
                            </div>
                            <div class="service-item">
                                <span>Teeth Whitening</span>
                                <span>25%</span>
                            </div>
                            <div class="service-item">
                                <span>Dental Filling</span>
                                <span>20%</span>
                            </div>
                            <div class="service-item">
                                <span>Others</span>
                                <span>10%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-card">
                        <h3>‚è∞ Appointment Stats</h3>
                        <div class="appointment-stats">
                            <div class="stat-item">
                                <span class="stat-label">Total Appointments</span>
                                <span class="stat-value">156</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Completed</span>
                                <span class="stat-value">142</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Cancelled</span>
                                <span class="stat-value">8</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">No-show</span>
                                <span class="stat-value">6</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateReport() {
            showModal('Generate Report', `
                <form id="reportForm">
                    <div class="form-group">
                        <label for="reportType">Report Type:</label>
                        <select id="reportType" required>
                            <option value="">Select Report Type</option>
                            <option value="revenue">Revenue Report</option>
                            <option value="patients">Patient Report</option>
                            <option value="appointments">Appointment Report</option>
                            <option value="services">Service Report</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportPeriod">Period:</label>
                        <select id="reportPeriod" required>
                            <option value="">Select Period</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportStartDate">Start Date:</label>
                        <input type="date" id="reportStartDate" required>
                    </div>
                    <div class="form-group">
                        <label for="reportEndDate">End Date:</label>
                        <input type="date" id="reportEndDate" required>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="submit" class="btn">üìä Generate Report</button>
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('reportForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const type = document.getElementById('reportType').value;
                const period = document.getElementById('reportPeriod').value;
                const startDate = document.getElementById('reportStartDate').value;
                const endDate = document.getElementById('reportEndDate').value;
                
                if (type && period && startDate && endDate) {
                    showToast(`üìä ${type} report generated successfully!`, 'success');
                    this.parentElement.parentElement.remove();
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function exportReport() {
            showToast('üì• Exporting report...', 'info');
            setTimeout(() => {
                showToast('‚úÖ Report exported successfully!', 'success');
            }, 2000);
        }

        // Appointments Functions
        function refreshAppointments() {
            showToast('üîÑ Refreshing appointments...', 'info');
            // Load appointments from localStorage or Firebase
            loadAppointments();
            setTimeout(() => {
                showToast('‚úÖ Appointments refreshed!', 'success');
            }, 1000);
        }

        function exportAppointments() {
            showToast('üì• Exporting appointments...', 'info');
            setTimeout(() => {
                showToast('‚úÖ Appointments exported successfully!', 'success');
            }, 2000);
        }

        function filterAppointments() {
            const statusFilter = document.getElementById('statusFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;
            const sortFilter = document.getElementById('sortFilter').value;
            
            // Filter and sort appointments based on selected criteria
            showToast(`üîç Filtering by ${statusFilter || 'all status'}...`, 'info');
        }

        function showQRCode(appointmentId) {
            // Get appointment data (same format as Excel template)
            const appointmentData = getAppointmentData(appointmentId);
            
            // Generate QR code URL using same format as Excel template
            const qrData = `${appointmentData.patientId}-${appointmentData.name}-${appointmentData.date}-${appointmentData.time}-${appointmentData.dentist}-${appointmentData.service}`;
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(qrData)}`;
            
            showModal('QR Code', `
                <div class="qr-code-display">
                    <h3>Patient QR Code</h3>
                    <div class="qr-code-container">
                        <img src="${qrUrl}" alt="QR Code" style="width: 200px; height: 200px; border: 2px solid #333; margin: 20px auto; display: block;">
                    </div>
                    <p><strong>QR Code:</strong> ${appointmentData.qrCode}</p>
                    <p><strong>Patient ID:</strong> ${appointmentData.patientId}</p>
                    <p><strong>Patient:</strong> ${appointmentData.name}</p>
                    <p><strong>Date:</strong> ${appointmentData.date}</p>
                    <p><strong>Time:</strong> ${appointmentData.time}</p>
                    <p><strong>Service:</strong> ${appointmentData.service}</p>
                    <p><strong>Clinic:</strong> ${appointmentData.clinic}</p>
                    <div class="qr-actions">
                        <button class="btn btn-primary" onclick="printQRCode('${appointmentData.qrCode}')">üñ®Ô∏è Print QR</button>
                        <button class="btn btn-secondary" onclick="downloadQRCode('${appointmentData.qrCode}')">üì• Download</button>
                    </div>
                </div>
            `);
        }

        function getAppointmentData(appointmentId) {
            // Sample appointment data matching Excel template format
            const appointments = {
                1: {
                    patientId: "P001",
                    name: "Juan Dela Cruz",
                    phone: "+63 912 345 6789",
                    email: "juan.delacruz@email.com",
                    date: "2025-03-25",
                    time: "10:00 AM",
                    dentist: "Dr. Maria Santos",
                    service: "Dental Cleaning",
                    status: "Confirmed",
                    qrCode: "QR001",
                    clinic: "DeLas Alas Dental Clinic"
                },
                2: {
                    patientId: "P002",
                    name: "Sarah Johnson",
                    phone: "+63 917 123 4567",
                    email: "sarah.johnson@email.com",
                    date: "2025-03-26",
                    time: "2:00 PM",
                    dentist: "Dr. John Smith",
                    service: "Teeth Whitening",
                    status: "Confirmed",
                    qrCode: "QR002",
                    clinic: "DeLas Alas Dental Clinic"
                },
                3: {
                    patientId: "P003",
                    name: "Mike Davis",
                    phone: "+63 918 987 6543",
                    email: "mike.davis@email.com",
                    date: "2025-03-27",
                    time: "9:00 AM",
                    dentist: "Dr. Maria Santos",
                    service: "Dental Checkup",
                    status: "Pending",
                    qrCode: "QR003",
                    clinic: "DeLas Alas Dental Clinic"
                },
                4: {
                    patientId: "P004",
                    name: "Emma Wilson",
                    phone: "+63 919 456 7890",
                    email: "emma.wilson@email.com",
                    date: "2025-03-28",
                    time: "3:30 PM",
                    dentist: "Dr. John Smith",
                    service: "Tooth Extraction",
                    status: "Confirmed",
                    qrCode: "QR004",
                    clinic: "DeLas Alas Dental Clinic"
                },
                5: {
                    patientId: "P005",
                    name: "Robert Brown",
                    phone: "+63 920 111 2222",
                    email: "robert.brown@email.com",
                    date: "2025-03-29",
                    time: "11:00 AM",
                    dentist: "Dr. Maria Santos",
                    service: "Dental Cleaning",
                    status: "Confirmed",
                    qrCode: "QR005",
                    clinic: "DeLas Alas Dental Clinic"
                }
            };
            
            return appointments[appointmentId] || appointments[1]; // Default to first appointment if not found
        }

        function generateQRCode(data) {
            // Generate consistent QR code pattern based on data
            const hash = data.split('').reduce((a, b) => {
                a = ((a << 5) - a) + b.charCodeAt(0);
                return a & a;
            }, 0);
            
            // Create consistent pattern based on hash
            const pattern = [];
            for (let i = 0; i < 100; i++) {
                const shouldFill = ((hash + i) % 3) === 0;
                pattern.push(shouldFill ? '#000' : '#fff');
            }
            
            return pattern.map(color => `<div style="background: ${color};"></div>`).join('');
        }

        function printQRCode(qrCode) {
            showToast(`üñ®Ô∏è Printing QR Code: ${qrCode}`, 'info');
            setTimeout(() => {
                showToast('‚úÖ QR Code sent to printer!', 'success');
            }, 1000);
        }

        function downloadQRCode(qrCode) {
            showToast(`üì• Downloading QR Code: ${qrCode}`, 'info');
            setTimeout(() => {
                showToast('‚úÖ QR Code downloaded!', 'success');
            }, 1000);
        }

        function startAppointment(appointmentId) {
            if (confirm('Are you sure you want to start this appointment?')) {
                showToast(`üöÄ Starting appointment ${appointmentId}...`, 'info');
                // Update appointment status to 'in-progress'
                setTimeout(() => {
                    showToast('‚úÖ Appointment started!', 'success');
                }, 1000);
            }
        }

        function editAppointment(appointmentId) {
            showModal('Edit Appointment', `
                <form id="editAppointmentForm">
                    <div class="form-group">
                        <label for="editAppointmentDate">Date:</label>
                        <input type="date" id="editAppointmentDate" value="2024-01-15" required>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentTime">Time:</label>
                        <input type="time" id="editAppointmentTime" value="09:00" required>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentService">Service:</label>
                        <select id="editAppointmentService" required>
                            <option value="cleaning" selected>Dental Cleaning</option>
                            <option value="whitening">Teeth Whitening</option>
                            <option value="filling">Dental Filling</option>
                            <option value="extraction">Tooth Extraction</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentNotes">Notes:</label>
                        <textarea id="editAppointmentNotes" rows="3" placeholder="Additional notes...">Regular cleaning appointment</textarea>
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                        <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                        <button type="submit" class="btn btn-primary">üíæ Save Changes</button>
                    </div>
                </form>
            `);
            
            // Add form submission handler
            document.getElementById('editAppointmentForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const date = document.getElementById('editAppointmentDate').value;
                const time = document.getElementById('editAppointmentTime').value;
                const service = document.getElementById('editAppointmentService').value;
                const notes = document.getElementById('editAppointmentNotes').value;
                
                if (date && time && service) {
                    showToast(`üíæ Appointment ${appointmentId} updated successfully!`, 'success');
                    this.parentElement.parentElement.remove();
                    refreshAppointments(); // Refresh the appointments list
                } else {
                    showToast('Please fill in all required fields.', 'error');
                }
            });
        }

        function confirmAppointment(appointmentId) {
            if (confirm('Are you sure you want to confirm this appointment?')) {
                showToast(`‚úÖ Confirming appointment ${appointmentId}...`, 'info');
                // Update appointment status to 'confirmed' and generate QR code
                setTimeout(() => {
                    showToast(`‚úÖ Appointment ${appointmentId} confirmed! QR Code: QR${String(appointmentId).padStart(3, '0')}`, 'success');
                    refreshAppointments(); // Refresh the appointments list
                }, 1000);
            }
        }

        function cancelAppointment(appointmentId) {
            if (confirm('Are you sure you want to cancel this appointment?')) {
                const reason = prompt('Enter cancellation reason (optional):');
                showToast(`‚ùå Cancelling appointment ${appointmentId}...`, 'info');
                // Update appointment status to 'cancelled'
                setTimeout(() => {
                    showToast(`‚úÖ Appointment ${appointmentId} cancelled!`, 'success');
                    refreshAppointments(); // Refresh the appointments list
                }, 1000);
            }
        }

        // Settings Functions
        function loadDentistSettings() {
            const settingsContainer = document.querySelector('.dashboard-content');
            if (!settingsContainer) return;
            
            settingsContainer.innerHTML = `
                <div class="section-header">
                    <h2>‚öôÔ∏è Settings</h2>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>üë§ Profile Settings</h3>
                        <div class="settings-item">
                            <label>Full Name:</label>
                            <input type="text" value="Dr. Maria Santos">
                            <button class="btn btn-sm">Update</button>
                        </div>
                        <div class="settings-item">
                            <label>Email:</label>
                            <input type="email" value="dr.maria@clinic.com">
                            <button class="btn btn-sm">Update</button>
                        </div>
                        <div class="settings-item">
                            <label>Phone:</label>
                            <input type="tel" value="+63 912 345 6789">
                            <button class="btn btn-sm">Update</button>
                        </div>
                    </div>
                    
                    <div class="settings-card">
                        <h3>üè• Clinic Settings</h3>
                        <div class="settings-item">
                            <label>Clinic Name:</label>
                            <input type="text" value="DeLas Alas Dental Clinic">
                            <button class="btn btn-sm">Update</button>
                        </div>
                        <div class="settings-item">
                            <label>Address:</label>
                            <textarea rows="3">123 Main Street, Manila, Philippines</textarea>
                            <button class="btn btn-sm">Update</button>
                        </div>
                        <div class="settings-item">
                            <label>Business Hours:</label>
                            <input type="text" value="8:00 AM - 6:00 PM">
                            <button class="btn btn-sm">Update</button>
                        </div>
                    </div>
                    
                    <div class="settings-card">
                        <h3>üîî Notifications</h3>
                        <div class="settings-item">
                            <label>
                                <input type="checkbox" checked> Email Notifications
                            </label>
                        </div>
                        <div class="settings-item">
                            <label>
                                <input type="checkbox" checked> SMS Notifications
                            </label>
                        </div>
                        <div class="settings-item">
                            <label>
                                <input type="checkbox" checked> Appointment Reminders
                            </label>
                        </div>
                    </div>
                </div>
            `;
        }

        // Utility Functions
        function showModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>${title}</h2>
                    ${content}
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                z-index: 3000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Add event listeners for navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers to navigation items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const href = this.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        const sectionName = href.substring(1);
                        showDentistSection(sectionName);
                    }
                });
            });

            // Add click handlers to action cards
            document.querySelectorAll('.action-card').forEach(card => {
                card.addEventListener('click', function() {
                    const onclick = this.getAttribute('onclick');
                    if (onclick) {
                        eval(onclick);
                    }
                });
            });

            // Add click handlers to header buttons
            const settingsBtn = document.getElementById('settingsBtn');
            if (settingsBtn) {
                settingsBtn.addEventListener('click', () => showDentistSection('settings'));
            }

            const notificationsBtn = document.getElementById('notificationsBtn');
            if (notificationsBtn) {
                notificationsBtn.addEventListener('click', () => {
                    showToast('üîî You have 3 new notifications', 'info');
                });
            }

            // Add click handlers to export and refresh buttons
            const exportBtn = document.getElementById('exportBtn');
            if (exportBtn) {
                exportBtn.addEventListener('click', () => {
                    showToast('üì• Exporting appointments...', 'info');
                });
            }

            const refreshBtn = document.getElementById('refreshBtn');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', () => {
                    loadAppointments();
                    showToast('üîÑ Appointments refreshed', 'success');
                });
            }

            // Add click handler to logout button
            const logoutBtn = document.getElementById('dentistLogoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to logout?')) {
                        showToast('üëã Logging out...', 'info');
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 1000);
                    }
                });
            }

            // Add click handler to edit profile button
            const editProfileBtn = document.getElementById('dentistEditProfileBtn');
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', () => {
                    showModal('Edit Profile', `
                        <form id="editProfileForm">
                            <div class="form-group">
                                <label for="editProfileFullName">Full Name:</label>
                                <input type="text" id="editProfileFullName" value="Dr. Maria Santos" required>
                            </div>
                            <div class="form-group">
                                <label for="editProfileEmail">Email:</label>
                                <input type="email" id="editProfileEmail" value="dr.maria@clinic.com" required>
                            </div>
                            <div class="form-group">
                                <label for="editProfilePhone">Phone:</label>
                                <input type="tel" id="editProfilePhone" value="+63 912 345 6789">
                            </div>
                            <div class="form-group">
                                <label for="editProfileSpecialization">Specialization:</label>
                                <select id="editProfileSpecialization">
                                    <option value="general" selected>General Dentistry</option>
                                    <option value="orthodontics">Orthodontics</option>
                                    <option value="periodontics">Periodontics</option>
                                    <option value="endodontics">Endodontics</option>
                                    <option value="oral-surgery">Oral Surgery</option>
                                    <option value="pediatric">Pediatric Dentistry</option>
                                </select>
                            </div>
                            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                                <button type="button" class="btn btn-secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    `);
                });
            }

            // Initialize dashboard
            loadDashboardData();
        });
    </script>
    
</body>
</html>
